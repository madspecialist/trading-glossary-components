<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outstanding Shares Visualization</title>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Set dark background by default */
        body {
            background-color: #111827;
            margin: 0;
            min-height: 100vh;
        }
        
        /* Add scrollable class for step containers */
        .step-container {
            overflow-y: auto;
            max-height: 80vh;
            padding: 1rem;
        }
        
        /* Fix for colored backgrounds to ensure they fill their containers */
        .bg-color-fill {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const OutstandingSharesVisual = () => {
            const [isDarkMode, setIsDarkMode] = React.useState(true);
            const [activeTab, setActiveTab] = React.useState('structure');
            const [currentStep, setCurrentStep] = React.useState(1);
            const chartRef = React.useRef(null);
            const [chart, setChart] = React.useState(null);
            const [showingExample, setShowingExample] = React.useState(false);
            const brandColor = "#079A4F"; // Your brand green color

            React.useEffect(() => {
                const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
                setIsDarkMode(darkModeQuery.matches);

                const handler = (e) => setIsDarkMode(e.matches);
                darkModeQuery.addEventListener('change', handler);

                return () => darkModeQuery.removeEventListener('change', handler);
            }, []);
            // Next/Previous step handlers
            const nextStep = () => {
                setCurrentStep(prev => prev < 5 ? prev + 1 : 1);
            };

            const prevStep = () => {
                setCurrentStep(prev => prev > 1 ? prev - 1 : 5);
            };

            // Chart data and rendering
            React.useEffect(() => {
                if (chartRef.current) {
                    if (chart) {
                        chart.destroy();
                    }

                    const ctx = chartRef.current.getContext('2d');
                    
                    if (showingExample) {
                        // Sample data for Apple Inc.
                        const newChart = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: ['Institutional Investors', 'Retail Investors', 'Insiders'],
                                datasets: [{
                                    label: 'Apple Inc. Ownership',
                                    data: [58, 36, 6],
                                    backgroundColor: ['#3B82F6', '#8B5CF6', '#079A4F'],
                                    borderColor: isDarkMode ? '#1F2937' : '#F3F4F6',
                                    borderWidth: 2,
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'bottom',
                                        labels: {
                                            color: isDarkMode ? '#D1D5DB' : '#4B5563',
                                            padding: 15
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: isDarkMode ? '#374151' : 'white',
                                        titleColor: isDarkMode ? '#fff' : '#000',
                                        bodyColor: isDarkMode ? '#fff' : '#000',
                                        borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                        borderWidth: 1,
                                        padding: 10,
                                        callbacks: {
                                            label: function(context) {
                                                return `${context.label}: ${context.raw}%`;
                                            }
                                        }
                                    }
                                }
                            }
                        });
                        setChart(newChart);
                    } else {
                        // Generic outstanding shares visualization
                        const newChart = new Chart(ctx, {
                            type: 'doughnut',
                            data: {
                                labels: ['Outstanding Shares', 'Treasury Stock'],
                                datasets: [{
                                    label: 'Share Structure',
                                    data: [85, 15],
                                    backgroundColor: ['#079A4F', '#374151'],
                                    borderColor: isDarkMode ? '#1F2937' : '#F3F4F6',
                                    borderWidth: 2,
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                cutout: '60%',
                                plugins: {
                                    legend: {
                                        position: 'bottom',
                                        labels: {
                                            color: isDarkMode ? '#D1D5DB' : '#4B5563',
                                            padding: 15
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: isDarkMode ? '#374151' : 'white',
                                        titleColor: isDarkMode ? '#fff' : '#000',
                                        bodyColor: isDarkMode ? '#fff' : '#000',
                                        borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                        borderWidth: 1,
                                        padding: 10,
                                        callbacks: {
                                            label: function(context) {
                                                return `${context.label}: ${context.raw}%`;
                                            }
                                        }
                                    }
                                }
                            }
                        });
                        setChart(newChart);
                    }
                }
            }, [showingExample, isDarkMode]);

            return (
                <div className="min-h-screen bg-gray-900 py-8 text-white">
                    <div className="w-full max-w-2xl mx-auto p-4">
                        <div className="rounded-lg shadow-lg p-6 bg-gray-800">
                            <h2 className="text-2xl font-bold mb-4 text-white">
                                Outstanding Shares
                            </h2>
                            <div className="mb-6 bg-gray-700 p-4 rounded-lg">
                                <div className="text-sm text-gray-400 mb-1">Definition</div>
                                <p className="text-gray-200">
                                    The total number of shares issued by a company that are currently held by all its shareholders, including retail investors, institutional investors, and company insiders. This figure excludes treasury shares (repurchased by the company) and is used to calculate market capitalization.
                                </p>
                            </div>

                            <div className="flex mb-4">
                                <button
                                    className={`px-4 py-2 rounded-tl-lg rounded-bl-lg ${!showingExample ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                    onClick={() => setShowingExample(false)}
                                >
                                    Concept
                                </button>
                                <button
                                    className={`px-4 py-2 rounded-tr-lg rounded-br-lg ${showingExample ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                    onClick={() => setShowingExample(true)}
                                >
                                    Apple Example
                                </button>
                            </div>

                            <div className="h-64 mb-2">
                                <canvas ref={chartRef}></canvas>
                            </div>
                            
                            {/* Chart explanation text */}
                            <div className="mb-6 text-center text-sm text-gray-300">
                                {showingExample ? 
                                    "This chart shows the ownership distribution of Apple Inc.'s outstanding shares. Institutional investors hold the majority (58%), followed by retail investors (36%), with company insiders holding a smaller portion (6%). This distribution affects voting control and market dynamics." 
                                    : 
                                    "This chart represents the relationship between outstanding shares and treasury stock. Outstanding shares (85%) are those currently in the hands of shareholders, while treasury stock (15%) represents shares repurchased by the company that are no longer part of the outstanding share count."
                                }
                            </div>

                            {/* Tabs Navigation */}
                            <div className="mb-4 flex">
                                <button
                                    className={`px-4 py-2 ${activeTab === 'structure' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tl-lg rounded-bl-lg`}
                                    onClick={() => setActiveTab('structure')}
                                >
                                    Structure
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'importance' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('importance')}
                                >
                                    Importance
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'calculation' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('calculation')}
                                >
                                    Calculation
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'changes' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tr-lg rounded-br-lg`}
                                    onClick={() => setActiveTab('changes')}
                                >
                                    Changes
                                </button>
                            </div>
                            {/* Structure Tab Content */}
                            {activeTab === 'structure' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Share Structure Visualization</h3>
                                    
                                    <div className="relative h-80 mb-4 bg-gray-700 rounded-lg overflow-hidden">
                                        {/* Step 1: Basic Share Structure */}
                                        {currentStep === 1 && (
                                            <div className="absolute inset-0 step-container">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Basic Share Structure</h3>
                                                <div className="flex flex-col">
                                                    <div className="grid grid-cols-2 gap-6 mb-4">
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-green-400 font-semibold text-center mb-2">Authorized Shares</h4>
                                                            <div className="relative h-24 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Added background color for Authorized Shares */}
                                                                <div className="bg-color-fill bg-blue-900 bg-opacity-10 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-gray-300 z-10">Maximum shares a company can issue</div>
                                                                <div className="absolute inset-0 border-2 border-blue-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Set in corporate charter</div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-blue-400 font-semibold text-center mb-2">Issued Shares</h4>
                                                            <div className="relative h-24 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Issued Shares */}
                                                                <div className="bg-color-fill bg-blue-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-gray-300 z-10">Shares actually issued to shareholders</div>
                                                                <div className="absolute inset-0 border-2 border-blue-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Subset of authorized shares</div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-center mb-2 text-sm">
                                                        Authorized shares represent the maximum number of shares a company is legally permitted to issue, as specified in its corporate charter.
                                                    </div>
                                                    <div className="text-center text-sm">
                                                        Issued shares represent the actual number of shares that have been distributed to shareholders, which can be less than or equal to the authorized shares.
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 2: Outstanding vs Treasury Shares */}
                                        {currentStep === 2 && (
                                            <div className="absolute inset-0 step-container">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Outstanding vs Treasury Shares</h3>
                                                <div className="flex flex-col">
                                                    <div className="grid grid-cols-2 gap-6 mb-4">
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-green-400 font-semibold text-center mb-2">Outstanding Shares</h4>
                                                            <div className="relative h-24 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Outstanding Shares */}
                                                                <div className="bg-color-fill bg-green-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-gray-300 z-10">Shares currently held by shareholders</div>
                                                                <div className="absolute inset-0 border-2 border-green-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Issued shares minus treasury stock</div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-amber-400 font-semibold text-center mb-2">Treasury Shares</h4>
                                                            <div className="relative h-24 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Treasury Shares */}
                                                                <div className="bg-color-fill bg-amber-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-gray-300 z-10">Shares repurchased by the company</div>
                                                                <div className="absolute inset-0 border-2 border-amber-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Not included in outstanding count</div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-center mb-2 text-sm">
                                                        Outstanding shares represent all issued shares that are currently in the hands of shareholders and have voting rights.
                                                    </div>
                                                    <div className="text-center text-sm">
                                                        Treasury shares are previously issued shares that have been repurchased by the company. These shares have no voting rights and don't receive dividends.
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 3: Shareholder Types */}
                                        {currentStep === 3 && (
                                            <div className="absolute inset-0 step-container">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Types of Shareholders</h3>
                                                <div className="flex flex-col">
                                                    <div className="grid grid-cols-3 gap-3 mb-4">
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-blue-400 font-semibold text-center mb-2">Institutional</h4>
                                                            <div className="relative h-20 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Institutional */}
                                                                <div className="bg-color-fill bg-blue-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-center text-gray-300 z-10">Mutual funds, pension funds, hedge funds</div>
                                                                <div className="absolute inset-0 border-2 border-blue-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Often majority owners</div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-purple-400 font-semibold text-center mb-2">Retail</h4>
                                                            <div className="relative h-20 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Retail */}
                                                                <div className="bg-color-fill bg-purple-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-center text-gray-300 z-10">Individual investors in the public</div>
                                                                <div className="absolute inset-0 border-2 border-purple-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Broad ownership base</div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-green-400 font-semibold text-center mb-2">Insiders</h4>
                                                            <div className="relative h-20 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Insiders */}
                                                                <div className="bg-color-fill bg-green-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-center text-gray-300 z-10">Executives, directors, founders</div>
                                                                <div className="absolute inset-0 border-2 border-green-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Often subject to restrictions</div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-center mb-2 text-sm">
                                                        Outstanding shares are distributed among various types of shareholders, each with different investment goals and levels of influence.
                                                    </div>
                                                    <div className="text-center text-sm">
                                                        The ownership distribution affects voting control, liquidity, and can impact stock price volatility and trading patterns.
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                        {/* Step 4: Share Classes */}
                                        {currentStep === 4 && (
                                            <div className="absolute inset-0 step-container">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Share Classes</h3>
                                                <div className="flex flex-col">
                                                    <div className="grid grid-cols-2 gap-6 mb-4">
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-blue-400 font-semibold text-center mb-2">Class A Shares</h4>
                                                            <div className="relative h-20 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Class A */}
                                                                <div className="bg-color-fill bg-blue-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-center text-gray-300 z-10">Enhanced voting rights (e.g., 10 votes per share)</div>
                                                                <div className="absolute inset-0 border-2 border-blue-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Often held by founders/management</div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-purple-400 font-semibold text-center mb-2">Class B Shares</h4>
                                                            <div className="relative h-20 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Class B */}
                                                                <div className="bg-color-fill bg-purple-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-center text-gray-300 z-10">Standard voting rights (1 vote per share)</div>
                                                                <div className="absolute inset-0 border-2 border-purple-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 text-center">Publicly traded shares</div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="text-center mb-2 text-sm">
                                                        Companies may issue different classes of shares with varying voting rights, dividend preferences, or other characteristics.
                                                    </div>
                                                    <div className="text-center text-sm">
                                                        All classes contribute to the total outstanding shares count, but their economic and control rights may differ significantly.
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                        
                                        {/* Step 5: Outstanding Shares vs Float */}
                                        {currentStep === 5 && (
                                            <div className="absolute inset-0 step-container">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Outstanding Shares vs. Float</h3>
                                                <div className="flex flex-col">
                                                    <div className="grid grid-cols-2 gap-6 mb-4">
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-green-400 font-semibold text-center mb-2">Outstanding Shares</h4>
                                                            <div className="relative h-24 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Outstanding Shares in comparison */}
                                                                <div className="bg-color-fill bg-green-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-center text-gray-300 z-10">All shares held by any shareholders</div>
                                                                <div className="absolute inset-0 border-2 border-green-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <ul className="text-xs text-gray-300 ml-4 list-disc">
                                                                <li>Includes restricted shares</li>
                                                                <li>Includes insider holdings</li>
                                                                <li>Used for market cap calculations</li>
                                                            </ul>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <h4 className="text-blue-400 font-semibold text-center mb-2">Float (Floating Shares)</h4>
                                                            <div className="relative h-24 mb-2 bg-gray-700 rounded-lg overflow-hidden">
                                                                {/* Fixed background color for Float */}
                                                                <div className="bg-color-fill bg-blue-900 bg-opacity-30 rounded-lg"></div>
                                                                <div className="absolute inset-0 flex items-center justify-center text-xs text-center text-gray-300 z-10">Freely tradable shares only</div>
                                                                <div className="absolute inset-0 border-2 border-blue-400 rounded-lg z-20"></div>
                                                            </div>
                                                            <ul className="text-xs text-gray-300 ml-4 list-disc">
                                                                <li>Excludes restricted shares</li>
                                                                <li>Excludes closely-held shares</li>
                                                                <li>Affects trading liquidity</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="mb-2">
                                                        <h4 className="font-semibold text-center text-purple-400 mb-2">Key Differences</h4>
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <div className="grid grid-cols-1 gap-2">
                                                                <div className="text-sm">
                                                                    <span className="font-semibold">Float</span> is a subset of outstanding shares that are available for trading by the general public. Contrary to being "unclaimed" or "unpurchased," floating shares are actually owned by public investors but are not subject to trading restrictions.
                                                                </div>
                                                                <div className="text-sm">
                                                                    <span className="font-semibold">Calculation:</span> Float = Outstanding Shares - Restricted Shares - Insider Holdings - Strategic Holdings (like 5%+ stakeholders)
                                                                </div>
                                                                <div className="text-sm">
                                                                    <span className="font-semibold">Importance:</span> A stock's float affects its liquidity and volatility. Stocks with smaller floats tend to have higher volatility as fewer shares are available for active trading.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    <div className="flex justify-between">
                                        <button 
                                            onClick={prevStep}
                                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                                        >
                                            Previous
                                        </button>
                                        <div className="flex space-x-2">
                                            {[1, 2, 3, 4, 5].map(i => (
                                                <div 
                                                    key={i}
                                                    className={`w-2 h-2 rounded-full ${currentStep === i ? 'bg-green-500' : 'bg-gray-500'}`}
                                                    onClick={() => setCurrentStep(i)}
                                                ></div>
                                            ))}
                                        </div>
                                        <button 
                                            onClick={nextStep}
                                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                                        >
                                            Next
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* Importance Tab Content */}
                            {activeTab === 'importance' && (
                                <div className="mb-6 step-container">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Importance of Outstanding Shares</h3>
                                    
                                    <div className="grid grid-cols-2 gap-4 mb-4">
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-blue-400 mb-2">Market Valuation</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Market Cap</span> = Share Price ร Outstanding Shares
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        Fundamental metric for comparing company sizes
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        Used for index inclusion and categorization (small/mid/large cap)
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-green-400 mb-2">Financial Ratios</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">EPS</span> = Net Income รท Outstanding Shares
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">P/E Ratio</span> = Share Price รท EPS
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Book Value Per Share</span> = Equity รท Outstanding Shares
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-amber-400 mb-2">Liquidity & Float</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Public Float</span> = Outstanding Shares Available for Trading
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        Affects stock trading volume and price volatility
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        Smaller float can lead to higher price volatility
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-purple-400 mb-2">Corporate Control</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Voting Power</span> = Percentage of Outstanding Shares Owned
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        Determines control over board elections and major decisions
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        Relevant for takeover attempts and shareholder activism
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Calculation Tab Content */}
                            {activeTab === 'calculation' && (
                                <div className="mb-6 step-container">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Calculating Outstanding Shares</h3>
                                    
                                    <div className="bg-gray-700 p-4 rounded-lg mb-4">
                                        <h4 className="font-semibold text-blue-400 mb-2">Basic Formula</h4>
                                        <div className="bg-gray-800 p-3 rounded-lg text-center mb-3">
                                            <p className="text-xl font-mono">Outstanding Shares = Issued Shares - Treasury Shares</p>
                                        </div>
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Issued Shares</span>
                                                    <p className="text-gray-300 text-xs">All shares that have been distributed by the company, including both those currently held by shareholders and treasury shares</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Treasury Shares</span>
                                                    <p className="text-gray-300 text-xs">Previously issued shares that have been repurchased by the company and are no longer in circulation</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-700 p-4 rounded-lg mb-4">
                                        <h4 className="font-semibold text-green-400 mb-2">Example Calculation</h4>
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <div className="mb-3">
                                                <div className="font-semibold mb-1">Company Data:</div>
                                                <ul className="list-disc pl-5 text-sm space-y-1">
                                                    <li>Authorized shares: 100 million</li>
                                                    <li>Issued shares: 70 million</li>
                                                    <li>Treasury shares: 5 million</li>
                                                </ul>
                                            </div>
                                            <div className="mb-3">
                                                <div className="font-semibold mb-1">Calculation:</div>
                                                <div className="text-sm pl-5">
                                                    <p>Outstanding Shares = 70 million - 5 million = 65 million shares</p>
                                                </div>
                                            </div>
                                            <div>
                                                <div className="font-semibold mb-1">Therefore:</div>
                                                <div className="text-sm pl-5">
                                                    <p>This company has 65 million outstanding shares in the hands of investors.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-700 p-4 rounded-lg">
                                        <h4 className="font-semibold text-amber-400 mb-2">Where to Find This Information</h4>
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Financial Reports</span>
                                                    <p className="text-gray-300 text-xs">Annual reports (10-K), quarterly reports (10-Q), and proxy statements (DEF 14A)</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Company Investor Relations</span>
                                                    <p className="text-gray-300 text-xs">Often provide current outstanding share count in investor fact sheets</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Financial Data Providers</span>
                                                    <p className="text-gray-300 text-xs">Services like Bloomberg, Yahoo Finance, or Google Finance</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Changes Tab Content */}
                            {activeTab === 'changes' && (
                                <div className="mb-6 step-container">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Changes in Outstanding Shares</h3>
                                    
                                    <div className="grid grid-cols-2 gap-4 mb-4">
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-blue-400 mb-2">Increase Factors</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">New Share Issuance</span>
                                                        <p className="text-gray-300 text-xs">Public offerings, private placements, or direct offerings</p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">Stock-Based Compensation</span>
                                                        <p className="text-gray-300 text-xs">Employee stock options, restricted stock units (RSUs)</p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">Convertible Securities</span>
                                                        <p className="text-gray-300 text-xs">Conversion of bonds or preferred shares to common stock</p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">Stock Splits</span>
                                                        <p className="text-gray-300 text-xs">Dividing shares to create more at lower price (e.g., 2-for-1)</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-red-400 mb-2">Decrease Factors</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">Stock Buybacks</span>
                                                        <p className="text-gray-300 text-xs">Company repurchases shares from the open market</p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">Reverse Stock Splits</span>
                                                        <p className="text-gray-300 text-xs">Combining shares to create fewer at higher price (e.g., 1-for-10)</p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">Share Cancellations</span>
                                                        <p className="text-gray-300 text-xs">Permanent retirement of treasury shares</p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <span className="font-semibold">Tender Offers</span>
                                                        <p className="text-gray-300 text-xs">Company offers to buy back shares at specified price</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-700 p-4 rounded-lg">
                                        <h4 className="font-semibold text-purple-400 mb-2">Impact of Share Count Changes</h4>
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Earnings Per Share</span>
                                                    <p className="text-gray-300 text-xs">Increases when shares decrease (buybacks), decreases when shares increase (dilution)</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Ownership Percentages</span>
                                                    <p className="text-gray-300 text-xs">Change relative to total outstanding shares; dilution occurs when new shares are issued</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <div>
                                                    <span className="font-semibold">Share Price</span>
                                                    <p className="text-gray-300 text-xs">Often adjusts in proportion to significant changes in outstanding share count</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            <div className="mt-6 bg-gray-700 p-4 rounded-lg">
                                <div className="font-semibold mb-2 text-green-400">Key Concepts</div>
                                <div className="grid grid-cols-2 gap-3 text-sm">
                                    <div>
                                        <span className="font-semibold">Basic Shares Outstanding:</span> 
                                        <p className="text-gray-300">All common shares currently held by shareholders</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Diluted Shares Outstanding:</span> 
                                        <p className="text-gray-300">Basic shares plus potential shares from convertible securities</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Float:</span> 
                                        <p className="text-gray-300">Shares available for public trading (excludes restricted shares)</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Share Turnover:</span> 
                                        <p className="text-gray-300">Trading volume relative to outstanding shares</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Weighted Average Shares:</span> 
                                        <p className="text-gray-300">Used for EPS calculations when share count changes</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Authorized vs. Outstanding:</span> 
                                        <p className="text-gray-300">Maximum permitted vs. actual shares in circulation</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OutstandingSharesVisual />);
    </script>
</body>
</html>