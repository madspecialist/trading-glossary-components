<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Markets Visualization</title>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Set dark background by default */
        body {
            background-color: #111827;
            margin: 0;
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const FinancialMarketsVisual = () => {
            const [isDarkMode, setIsDarkMode] = React.useState(true);
            const [activeTab, setActiveTab] = React.useState('types');
            const [marketType, setMarketType] = React.useState('equity');
            const [currentStep, setCurrentStep] = React.useState(1);
            const chartRef = React.useRef(null);
            const [chart, setChart] = React.useState(null);
            const brandColor = "#079A4F"; // Brand green color

            React.useEffect(() => {
                const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
                setIsDarkMode(darkModeQuery.matches);

                const handler = (e) => setIsDarkMode(e.matches);
                darkModeQuery.addEventListener('change', handler);

                return () => darkModeQuery.removeEventListener('change', handler);
            }, []);
            
            const nextStep = () => {
                setCurrentStep(prev => prev < 5 ? prev + 1 : 1);
            };

            const prevStep = () => {
                setCurrentStep(prev => prev > 1 ? prev - 1 : 5);
            };
            
            // Market types data with details
            const marketTypes = {
                equity: {
                    name: "Equity Markets",
                    description: "Platforms for trading ownership shares (stocks) in companies",
                    participants: "Individual investors, institutional investors, corporations",
                    examples: "NYSE, NASDAQ, London Stock Exchange",
                    instruments: "Common stocks, preferred stocks, ETFs",
                    color: "#3B82F6" // Blue
                },
                debt: {
                    name: "Debt Markets",
                    description: "Markets for trading fixed-income securities and loans",
                    participants: "Governments, corporations, financial institutions",
                    examples: "US Treasury market, corporate bond market",
                    instruments: "Government bonds, corporate bonds, municipal bonds",
                    color: "#10B981" // Emerald
                },
                forex: {
                    name: "Foreign Exchange Markets",
                    description: "Global marketplace for trading national currencies",
                    participants: "Banks, corporations, governments, speculators",
                    examples: "Interbank market, forex brokers",
                    instruments: "Currency pairs (EUR/USD, GBP/JPY, etc.)",
                    color: "#F59E0B" // Amber
                },
                commodity: {
                    name: "Commodity Markets",
                    description: "Markets for trading raw materials and primary products",
                    participants: "Producers, consumers, speculators",
                    examples: "Chicago Mercantile Exchange, London Metal Exchange",
                    instruments: "Futures contracts on gold, oil, agricultural products",
                    color: "#EF4444" // Red
                },
                derivative: {
                    name: "Derivatives Markets",
                    description: "Markets for financial contracts that derive value from underlying assets",
                    participants: "Hedgers, speculators, institutional investors",
                    examples: "Chicago Board Options Exchange, Eurex",
                    instruments: "Options, futures, swaps, forwards",
                    color: "#8B5CF6" // Purple
                }
            };
            // Chart for market comparison
            React.useEffect(() => {
                if (chartRef.current && activeTab === 'volume') {
                    if (chart) {
                        chart.destroy();
                    }

                    const ctx = chartRef.current.getContext('2d');
                    
                    // Example data for global market volumes
                    const marketData = {
                        labels: ['Equity', 'Debt', 'Forex', 'Commodities', 'Derivatives'],
                        datasets: [{
                            label: 'Daily Trading Volume ($ Trillion)',
                            data: [0.3, 0.8, 6.6, 0.2, 2.5],
                            backgroundColor: [
                                '#3B82F6', // Blue
                                '#10B981', // Emerald
                                '#F59E0B', // Amber
                                '#EF4444', // Red
                                '#8B5CF6'  // Purple
                            ],
                            borderColor: 'rgba(255, 255, 255, 0.3)',
                            borderWidth: 1
                        }]
                    };
                    
                    const newChart = new Chart(ctx, {
                        type: 'bar',
                        data: marketData,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    enabled: true,
                                    backgroundColor: isDarkMode ? '#374151' : 'white',
                                    titleColor: isDarkMode ? '#fff' : '#000',
                                    bodyColor: isDarkMode ? '#fff' : '#000',
                                    borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                    borderWidth: 1,
                                    padding: 10,
                                    displayColors: true,
                                    callbacks: {
                                        label: function(context) {
                                            return `Volume: $${context.raw} trillion`;
                                        }
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    title: {
                                        display: true,
                                        text: 'Daily Volume ($ Trillion)',
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    },
                                    grid: {
                                        color: isDarkMode ? '#374151' : '#e5e7eb'
                                    },
                                    ticks: {
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: isDarkMode ? '#374151' : '#e5e7eb'
                                    },
                                    ticks: {
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    }
                                }
                            }
                        }
                    });
                    setChart(newChart);
                }
            }, [activeTab, isDarkMode]);

            return (
                <div className="min-h-screen bg-gray-900 py-8 text-white">
                    <div className="w-full max-w-2xl mx-auto p-4">
                        <div className="rounded-lg shadow-lg p-6 bg-gray-800">
                            <h2 className="text-2xl font-bold mb-4 text-white">
                                Financial Markets
                            </h2>
                            
                            <div className="mb-6 bg-gray-700 p-4 rounded-lg">
                                <div className="text-sm text-gray-400 mb-1">Definition</div>
                                <p className="text-gray-200">
                                    Organized systems where individuals and entities trade financial securities, commodities, and other fungible assets at prices that reflect supply and demand. They serve as platforms that facilitate the exchange of capital between investors, companies, and governments.
                                </p>
                            </div>

                            <div className="mb-4 flex">
                                <button
                                    className={`px-4 py-2 ${activeTab === 'types' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tl-lg rounded-bl-lg`}
                                    onClick={() => setActiveTab('types')}
                                >
                                    Types
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'functions' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('functions')}
                                >
                                    Functions
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'participants' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('participants')}
                                >
                                    Participants
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'volume' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tr-lg rounded-br-lg`}
                                    onClick={() => setActiveTab('volume')}
                                >
                                    Volume
                                </button>
                            </div>

                            {/* Market Types */}
                            {activeTab === 'types' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Types of Financial Markets</h3>
                                    
                                    <div className="grid grid-cols-3 gap-2 mb-4">
                                        {Object.keys(marketTypes).map(type => (
                                            <button
                                                key={type}
                                                className={`p-2 rounded-lg border-2 transition-colors ${marketType === type ? 'border-white bg-gray-700' : 'border-gray-600 bg-gray-800'}`}
                                                style={{ borderLeftColor: marketTypes[type].color }}
                                                onClick={() => setMarketType(type)}
                                            >
                                                <div className="font-semibold text-sm" style={{ color: marketTypes[type].color }}>
                                                    {marketTypes[type].name}
                                                </div>
                                            </button>
                                        ))}
                                    </div>

                                    <div className="bg-gray-700 p-4 rounded-lg">
                                        <h4 className="font-semibold text-lg mb-2" style={{ color: marketTypes[marketType].color }}>
                                            {marketTypes[marketType].name}
                                        </h4>
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: marketTypes[marketType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Description:</span>
                                                    <p className="text-gray-200 text-sm">{marketTypes[marketType].description}</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: marketTypes[marketType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Key Participants:</span>
                                                    <p className="text-gray-200 text-sm">{marketTypes[marketType].participants}</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: marketTypes[marketType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Examples:</span>
                                                    <p className="text-gray-200 text-sm">{marketTypes[marketType].examples}</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: marketTypes[marketType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Financial Instruments:</span>
                                                    <p className="text-gray-200 text-sm">{marketTypes[marketType].instruments}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                            {/* Market Functions */}
                            {activeTab === 'functions' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Key Functions of Financial Markets</h3>
                                    
                                    <div className="relative h-96 mb-4 bg-gray-700 rounded-lg overflow-hidden">
                                        {/* Step 1: Price Discovery - ADDED SCROLLING */}
                                        {currentStep === 1 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Function 1: Price Discovery</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="w-full bg-gray-800 p-4 rounded-lg mb-4">
                                                        <p className="text-gray-300 text-center mb-4">Markets determine the price of assets through the interaction of buyers and sellers</p>
                                                        
                                                        <div className="grid grid-cols-2 gap-4 mb-4">
                                                            <div className="bg-blue-900 bg-opacity-30 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-2 text-center">Buyers (Demand)</div>
                                                                <div className="text-sm text-gray-300">Willing to pay higher prices when:</div>
                                                                <ul className="list-disc pl-4 text-sm text-gray-300 mt-2">
                                                                    <li>Expected future returns increase</li>
                                                                    <li>Positive economic outlook</li>
                                                                    <li>Lower perceived risk</li>
                                                                    <li>More capital available</li>
                                                                </ul>
                                                            </div>
                                                            <div className="bg-red-900 bg-opacity-30 p-3 rounded-lg">
                                                                <div className="text-red-400 font-semibold mb-2 text-center">Sellers (Supply)</div>
                                                                <div className="text-sm text-gray-300">Willing to accept lower prices when:</div>
                                                                <ul className="list-disc pl-4 text-sm text-gray-300 mt-2">
                                                                    <li>Need for immediate liquidity</li>
                                                                    <li>Negative outlook for asset</li>
                                                                    <li>Higher perceived risk</li>
                                                                    <li>Portfolio rebalancing needs</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-700 p-3 rounded-lg text-center">
                                                            <div className="font-semibold text-white mb-2">Market Price</div>
                                                            <div className="text-sm text-gray-300">The equilibrium point where supply meets demand</div>
                                                            <div className="mt-2 flex items-center justify-center">
                                                                <div className="bg-blue-500 h-6 w-6 rounded-l-full"></div>
                                                                <div className="bg-purple-500 h-8 w-8 rounded-full -ml-3 z-10 flex items-center justify-center text-white text-xs font-bold">$</div>
                                                                <div className="bg-red-500 h-6 w-6 rounded-r-full -ml-3"></div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 mt-2">Efficient price discovery provides signals about the intrinsic value of assets</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 2: Liquidity Provision - ADDED SCROLLING */}
                                        {currentStep === 2 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Function 2: Liquidity Provision</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="w-full bg-gray-800 p-4 rounded-lg mb-4">
                                                        <p className="text-gray-300 text-center mb-4">Markets enable quick buying and selling of assets without significant price impact</p>
                                                        
                                                        <div className="grid grid-cols-3 gap-3 mb-4">
                                                            <div className="bg-gray-700 p-3 rounded-lg text-center">
                                                                <div className="text-amber-400 font-semibold mb-1">Low Liquidity</div>
                                                                <div className="mb-2 bg-amber-900 bg-opacity-30 p-2 rounded">
                                                                    <div className="text-xs text-gray-300">Wide Bid-Ask Spread</div>
                                                                    <div className="flex justify-between mt-1">
                                                                        <div className="text-red-400 text-xs">Bid: $95</div>
                                                                        <div className="text-blue-400 text-xs">Ask: $105</div>
                                                                    </div>
                                                                </div>
                                                                <div className="text-xs text-gray-300">Few market participants</div>
                                                                <div className="text-xs text-gray-300">High price impact</div>
                                                                <div className="text-xs text-gray-300">Longer execution time</div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg text-center">
                                                                <div className="text-green-400 font-semibold mb-1">Medium Liquidity</div>
                                                                <div className="mb-2 bg-green-900 bg-opacity-30 p-2 rounded">
                                                                    <div className="text-xs text-gray-300">Moderate Bid-Ask Spread</div>
                                                                    <div className="flex justify-between mt-1">
                                                                        <div className="text-red-400 text-xs">Bid: $98</div>
                                                                        <div className="text-blue-400 text-xs">Ask: $102</div>
                                                                    </div>
                                                                </div>
                                                                <div className="text-xs text-gray-300">Active market</div>
                                                                <div className="text-xs text-gray-300">Moderate price impact</div>
                                                                <div className="text-xs text-gray-300">Average execution time</div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg text-center">
                                                                <div className="text-blue-400 font-semibold mb-1">High Liquidity</div>
                                                                <div className="mb-2 bg-blue-900 bg-opacity-30 p-2 rounded">
                                                                    <div className="text-xs text-gray-300">Tight Bid-Ask Spread</div>
                                                                    <div className="flex justify-between mt-1">
                                                                        <div className="text-red-400 text-xs">Bid: $99.90</div>
                                                                        <div className="text-blue-400 text-xs">Ask: $100.10</div>
                                                                    </div>
                                                                </div>
                                                                <div className="text-xs text-gray-300">Many participants</div>
                                                                <div className="text-xs text-gray-300">Minimal price impact</div>
                                                                <div className="text-xs text-gray-300">Immediate execution</div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-700 p-3 rounded-lg">
                                                            <div className="font-semibold text-white mb-2 text-center">Benefits of Market Liquidity</div>
                                                            <div className="grid grid-cols-2 gap-2">
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">Lower transaction costs for market participants</div>
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">Efficient allocation of capital across the economy</div>
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">Ability to quickly enter or exit positions</div>
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">Greater price stability and market confidence</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 3: Capital Allocation */}
                                        {currentStep === 3 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Function 3: Capital Allocation</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="w-full bg-gray-800 p-4 rounded-lg mb-4">
                                                        <p className="text-gray-300 text-center mb-4">Markets direct financial resources to their most productive uses in the economy</p>
                                                        
                                                        <div className="grid grid-cols-2 gap-4 mb-4">
                                                            <div className="bg-green-900 bg-opacity-30 p-3 rounded-lg">
                                                                <div className="text-green-400 font-semibold mb-2 text-center">Capital Providers</div>
                                                                <div className="space-y-2">
                                                                    <div className="bg-gray-700 p-2 rounded text-sm">
                                                                        <span className="font-semibold">Investors</span>
                                                                        <div className="text-xs text-gray-300 mt-1">Seeking returns on investable funds</div>
                                                                    </div>
                                                                    <div className="bg-gray-700 p-2 rounded text-sm">
                                                                        <span className="font-semibold">Savers</span>
                                                                        <div className="text-xs text-gray-300 mt-1">Looking for wealth preservation and growth</div>
                                                                    </div>
                                                                    <div className="bg-gray-700 p-2 rounded text-sm">
                                                                        <span className="font-semibold">Financial Institutions</span>
                                                                        <div className="text-xs text-gray-300 mt-1">Deploying client funds and own capital</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-blue-900 bg-opacity-30 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-2 text-center">Capital Users</div>
                                                                <div className="space-y-2">
                                                                    <div className="bg-gray-700 p-2 rounded text-sm">
                                                                        <span className="font-semibold">Businesses</span>
                                                                        <div className="text-xs text-gray-300 mt-1">Funding operations and expansion</div>
                                                                    </div>
                                                                    <div className="bg-gray-700 p-2 rounded text-sm">
                                                                        <span className="font-semibold">Governments</span>
                                                                        <div className="text-xs text-gray-300 mt-1">Financing public projects and services</div>
                                                                    </div>
                                                                    <div className="bg-gray-700 p-2 rounded text-sm">
                                                                        <span className="font-semibold">Households</span>
                                                                        <div className="text-xs text-gray-300 mt-1">Borrowing for major purchases</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-700 p-3 rounded-lg">
                                                            <div className="font-semibold text-white mb-2 text-center">Efficient Capital Allocation</div>
                                                            <div className="text-sm text-gray-300 mb-2">Market-based allocation directs funds to opportunities with the highest risk-adjusted returns</div>
                                                            <div className="grid grid-cols-3 gap-2">
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">Most promising businesses receive funding</div>
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">Economic growth through productive investment</div>
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">Innovation and job creation</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 4: Risk Transfer */}
                                        {currentStep === 4 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Function 4: Risk Transfer</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="w-full bg-gray-800 p-4 rounded-lg mb-4">
                                                        <p className="text-gray-300 text-center mb-4">Markets allow participants to transfer and manage various types of risk</p>
                                                        
                                                        <div className="grid grid-cols-2 gap-4 mb-4">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-purple-400 font-semibold mb-2 text-center">Risk Hedgers</div>
                                                                <div className="text-sm text-gray-300 mb-2">Seeking to reduce exposure to unwanted risks</div>
                                                                <div className="space-y-2">
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Farmer</span>: Locks in future crop prices to protect against price drops
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Manufacturer</span>: Hedges currency risk on international sales
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Bank</span>: Transfers credit risk through credit default swaps
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-amber-400 font-semibold mb-2 text-center">Risk Takers</div>
                                                                <div className="text-sm text-gray-300 mb-2">Willing to assume risk in exchange for potential profit</div>
                                                                <div className="space-y-2">
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Speculators</span>: Take calculated risks based on market views
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Arbitrageurs</span>: Profit from price discrepancies across markets
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Market Makers</span>: Assume temporary risk to facilitate transactions
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-700 p-3 rounded-lg">
                                                            <div className="font-semibold text-white mb-2 text-center">Key Risk Transfer Instruments</div>
                                                            <div className="grid grid-cols-3 gap-2">
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">
                                                                    <span className="font-semibold">Options</span>
                                                                    <div>Right to buy/sell at predetermined price</div>
                                                                </div>
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">
                                                                    <span className="font-semibold">Futures</span>
                                                                    <div>Obligation to buy/sell at future date</div>
                                                                </div>
                                                                <div className="text-xs text-gray-300 p-2 bg-gray-800 rounded">
                                                                    <span className="font-semibold">Swaps</span>
                                                                    <div>Exchange of cash flows or liabilities</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 5: Market Information */}
                                        {currentStep === 5 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Function 5: Information Processing</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="w-full bg-gray-800 p-4 rounded-lg mb-4">
                                                        <p className="text-gray-300 text-center mb-4">Markets process vast amounts of information and reflect it in asset prices</p>
                                                        
                                                        <div className="mb-4 bg-gray-700 p-3 rounded-lg">
                                                            <div className="font-semibold text-white mb-2 text-center">Market Efficiency Theory</div>
                                                            <div className="text-sm text-gray-300 mb-2 text-center">Prices reflect all available information to varying degrees</div>
                                                            
                                                            <div className="grid grid-cols-3 gap-2">
                                                                <div className="bg-gray-800 p-2 rounded">
                                                                    <div className="text-blue-400 font-semibold text-xs text-center mb-1">Weak Form</div>
                                                                    <div className="text-xs text-gray-300">All past price information is reflected in current prices</div>
                                                                </div>
                                                                <div className="bg-gray-800 p-2 rounded">
                                                                    <div className="text-green-400 font-semibold text-xs text-center mb-1">Semi-Strong Form</div>
                                                                    <div className="text-xs text-gray-300">All public information is reflected in current prices</div>
                                                                </div>
                                                                <div className="bg-gray-800 p-2 rounded">
                                                                    <div className="text-purple-400 font-semibold text-xs text-center mb-1">Strong Form</div>
                                                                    <div className="text-xs text-gray-300">All information (public and private) is reflected in prices</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="grid grid-cols-2 gap-4">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-green-400 font-semibold mb-2 text-center">Information Types</div>
                                                                <div className="space-y-2">
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Fundamental</span>: Economic data, earnings, balance sheets
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Technical</span>: Price patterns, volume, momentum indicators
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        <span className="font-semibold">Sentiment</span>: Investor psychology, risk appetite
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-2 text-center">Price Signals</div>
                                                                <div className="space-y-2">
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        Guide investment decisions (which projects get funded)
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        Provide feedback on corporate strategies and policies
                                                                    </div>
                                                                    <div className="p-2 bg-gray-800 rounded text-xs">
                                                                        Serve as economic indicators for policymakers
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    <div className="flex justify-between">
                                        <button 
                                            onClick={prevStep}
                                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                                        >
                                            Previous
                                        </button>
                                        <div className="flex space-x-2">
                                            {[1, 2, 3, 4, 5].map(i => (
                                                <div 
                                                    key={i}
                                                    className={`w-2 h-2 rounded-full ${currentStep === i ? 'bg-green-500' : 'bg-gray-500'}`}
                                                    onClick={() => setCurrentStep(i)}
                                                ></div>
                                            ))}
                                        </div>
                                        <button 
                                            onClick={nextStep}
                                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                                        >
                                            Next
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* Market Participants */}
                            {activeTab === 'participants' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Market Participants</h3>
                                    
                                    <div className="grid grid-cols-2 gap-4 mb-4">
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-blue-400 mb-2">Individual Investors</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Retail Traders</span>: Individual market participants trading personal accounts
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Goals</span>: Long-term wealth building, retirement saving, speculation
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Access</span>: Via brokers, trading apps, investment platforms
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Typical Instruments</span>: Stocks, ETFs, mutual funds, bonds
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-green-400 mb-2">Institutional Investors</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Types</span>: Pension funds, mutual funds, insurance companies, endowments
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Scale</span>: Large trading volumes with significant market impact
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Strategy</span>: Often long-term oriented with diversified portfolios
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Access</span>: Direct market access, prime brokers, dark pools
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-4 mb-4">
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-amber-400 mb-2">Intermediaries</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Brokers</span>: Execute trades for clients in exchange for commissions
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Market Makers</span>: Provide liquidity by continuously offering to buy and sell
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Exchanges</span>: Organized venues where trading occurs, with standardized rules
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Clearing Houses</span>: Ensure trades are settled properly and manage counterparty risk
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-purple-400 mb-2">Specialized Participants</h4>
                                            <div className="space-y-3">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Hedge Funds</span>: Alternative investment vehicles using sophisticated strategies
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Proprietary Traders</span>: Trade with firm capital rather than client funds
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Algorithmic Traders</span>: Use computer programs to execute trading strategies
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Central Banks</span>: Influence markets through monetary policy and intervention
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-gray-700 p-4 rounded-lg">
                                        <h4 className="font-semibold text-red-400 mb-2">Issuers</h4>
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Corporations</span>: Issue stocks and bonds to raise capital for operations and growth
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Governments</span>: Issue bonds to finance public spending and manage national debt
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Financial Institutions</span>: Create structured products, securitizations, and other instruments
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Municipalities</span>: Issue municipal bonds to fund local infrastructure and services
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Market Volume */}
                            {activeTab === 'volume' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Market Trading Volumes</h3>
                                    
                                    <div className="h-64 mb-4">
                                        <canvas ref={chartRef}></canvas>
                                    </div>

                                    <div className="bg-gray-700 p-4 rounded-lg">
                                        <h4 className="font-semibold text-md mb-2 text-green-400">Market Size Comparison</h4>
                                        
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Forex (FX) Market</span>: The largest financial market globally with daily volumes exceeding $6 trillion, primarily consisting of institutional trading
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Derivatives Markets</span>: Over $2 trillion in daily volume, with futures, options, and swaps used for hedging and speculation
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Bond Markets</span>: Approximately $800 billion in daily trading volume, dominated by government and corporate debt securities
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Equity Markets</span>: Around $300 billion in daily trading volume across global stock exchanges, with high retail participation
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Commodity Markets</span>: Approximately $200 billion in daily volume, with energy, metals, and agricultural products being major categories
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            <div className="mt-6 bg-gray-700 p-4 rounded-lg">
                                <div className="font-semibold mb-2 text-green-400">Evolution of Financial Markets</div>
                                <div className="space-y-3">
                                    <div className="flex items-start">
                                        <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                        <p className="text-gray-200 text-sm">
                                            <span className="font-semibold">Technology Impact:</span> Electronic trading platforms and algorithms have dramatically increased market speed and efficiency.
                                        </p>
                                    </div>
                                    <div className="flex items-start">
                                        <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                        <p className="text-gray-200 text-sm">
                                            <span className="font-semibold">Globalization:</span> Markets have become increasingly interconnected, with 24-hour trading and cross-border capital flows.
                                        </p>
                                    </div>
                                    <div className="flex items-start">
                                        <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                        <p className="text-gray-200 text-sm">
                                            <span className="font-semibold">Product Innovation:</span> Continuous development of new financial instruments to address specific needs and manage various risks.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FinancialMarketsVisual />);
    </script>
</body>
</html>