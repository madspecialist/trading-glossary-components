<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Capitalization Visualization</title>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Set dark background by default */
        body {
            background-color: #111827;
            margin: 0;
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const MarketCapVisual = () => {
            const [isDarkMode, setIsDarkMode] = React.useState(true);
            const [activeTab, setActiveTab] = React.useState('classifications');
            const [currentStep, setCurrentStep] = React.useState(1);
            const [showingExample, setShowingExample] = React.useState(false);
            const chartRef = React.useRef(null);
            const [chart, setChart] = React.useState(null);
            const brandColor = "#079A4F"; // Your brand green color

            React.useEffect(() => {
                const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
                setIsDarkMode(darkModeQuery.matches);

                const handler = (e) => setIsDarkMode(e.matches);
                darkModeQuery.addEventListener('change', handler);

                return () => darkModeQuery.removeEventListener('change', handler);
            }, []);

            const nextStep = () => {
                setCurrentStep(prev => prev < 4 ? prev + 1 : 1);
            };

            const prevStep = () => {
                setCurrentStep(prev => prev > 1 ? prev - 1 : 4);
            };

            // Example market cap data for visualization
            const marketCapData = {
                // Top companies by market cap
                topCompanies: [
                    { name: "Apple", symbol: "AAPL", marketCap: 3000, category: "Mega-Cap", color: "#3B82F6" },
                    { name: "Microsoft", symbol: "MSFT", marketCap: 2850, category: "Mega-Cap", color: "#3B82F6" },
                    { name: "Nvidia", symbol: "NVDA", marketCap: 2200, category: "Mega-Cap", color: "#3B82F6" },
                    { name: "Amazon", symbol: "AMZN", marketCap: 1750, category: "Mega-Cap", color: "#3B82F6" },
                    { name: "Alphabet", symbol: "GOOGL", marketCap: 1700, category: "Mega-Cap", color: "#3B82F6" },
                    { name: "Meta", symbol: "META", marketCap: 1200, category: "Mega-Cap", color: "#3B82F6" },
                    { name: "Tesla", symbol: "TSLA", marketCap: 700, category: "Large-Cap", color: "#8B5CF6" },
                    { name: "JPMorgan", symbol: "JPM", marketCap: 550, category: "Large-Cap", color: "#8B5CF6" },
                    { name: "Visa", symbol: "V", marketCap: 520, category: "Large-Cap", color: "#8B5CF6" },
                    { name: "Walmart", symbol: "WMT", marketCap: 420, category: "Large-Cap", color: "#8B5CF6" }
                ],
                
                // Market cap distributions by category (in trillion USD)
                marketCapDistribution: [
                    { category: "Mega-Cap (>$200B)", value: 25.4, color: "#3B82F6" },
                    { category: "Large-Cap ($10B-$200B)", value: 18.6, color: "#8B5CF6" },
                    { category: "Mid-Cap ($2B-$10B)", value: 5.2, color: "#10B981" },
                    { category: "Small-Cap ($300M-$2B)", value: 1.8, color: "#F59E0B" },
                    { category: "Micro-Cap (<$300M)", value: 0.4, color: "#FF4444" }
                ],
                
                // Market cap examples by category (in billion USD)
                marketCapExamples: {
                    "Mega-Cap": [
                        { name: "Apple", value: 3000 },
                        { name: "Microsoft", value: 2850 },
                        { name: "Nvidia", value: 2200 }
                    ],
                    "Large-Cap": [
                        { name: "Netflix", value: 240 },
                        { name: "Nike", value: 150 },
                        { name: "IBM", value: 135 }
                    ],
                    "Mid-Cap": [
                        { name: "Crocs", value: 7.5 },
                        { name: "Mattel", value: 6.2 },
                        { name: "Spirit Airlines", value: 3.8 }
                    ],
                    "Small-Cap": [
                        { name: "Blue Apron", value: 1.2 },
                        { name: "Tupperware", value: 0.8 },
                        { name: "Party City", value: 0.5 }
                    ],
                    "Micro-Cap": [
                        { name: "Aspen Group", value: 0.25 },
                        { name: "Boxlight", value: 0.12 },
                        { name: "Phoenix Motors", value: 0.08 }
                    ]
                },
                
                // Market cap categories with definitions
                marketCapCategories: {
                    "Mega-Cap": {
                        range: "> $200 billion",
                        description: "The largest, most established companies in the world. These industry leaders often have dominant market positions and global operations.",
                        characteristics: ["Global brand recognition", "Industry leaders", "Stable cash flows", "Often pay dividends", "Lower volatility"],
                        indices: ["S&P 100", "Dow Jones Industrial Average", "Russell Top 50"],
                        color: "#3B82F6"
                    },
                    "Large-Cap": {
                        range: "$10 billion - $200 billion",
                        description: "Well-established companies with significant market presence. They typically have proven business models and operate in mature markets.",
                        characteristics: ["Established business models", "Substantial market share", "Financial stability", "Moderate growth potential", "Often included in major indices"],
                        indices: ["S&P 500", "Russell 1000", "MSCI World"],
                        color: "#8B5CF6"
                    },
                    "Mid-Cap": {
                        range: "$2 billion - $10 billion",
                        description: "Growing companies that have established themselves beyond the small-cap stage. Often in expansion phase with considerable growth potential.",
                        characteristics: ["Higher growth potential", "Expanding market presence", "Increasing institutional attention", "Often in mature growth phase", "Moderate volatility"],
                        indices: ["S&P MidCap 400", "Russell Midcap", "MSCI ACWI Mid Cap"],
                        color: "#10B981"
                    },
                    "Small-Cap": {
                        range: "$300 million - $2 billion",
                        description: "Smaller companies that may be in early growth stages or niche markets. Often present greater growth potential but with increased risk.",
                        characteristics: ["Higher growth potential", "Higher volatility", "Less analyst coverage", "Potentially undervalued", "Limited international presence"],
                        indices: ["Russell 2000", "S&P SmallCap 600", "MSCI Small Cap"],
                        color: "#F59E0B"
                    },
                    "Micro-Cap": {
                        range: "< $300 million",
                        description: "The smallest publicly traded companies. Often speculative investments with high risk and potential reward.",
                        characteristics: ["Highest volatility", "Minimal analyst coverage", "Limited institutional ownership", "Low trading volume", "Often newer companies"],
                        indices: ["Russell Microcap", "Dow Jones Select Micro-Cap", "IWC ETF"],
                        color: "#FF4444"
                    }
                }
            };

            // Market cap calculation examples
            const calculationExamples = [
                {
                    company: "Apple Inc.",
                    symbol: "AAPL",
                    shares: "15.9 billion",
                    price: "$188.39",
                    marketCap: "$3.0 trillion",
                    category: "Mega-Cap",
                    color: "#3B82F6"
                },
                {
                    company: "Netflix Inc.",
                    symbol: "NFLX", 
                    shares: "440 million",
                    price: "$545.50",
                    marketCap: "$240 billion",
                    category: "Large-Cap",
                    color: "#8B5CF6"
                },
                {
                    company: "Crocs Inc.",
                    symbol: "CROX",
                    shares: "60.8 million",
                    price: "$123.21",
                    marketCap: "$7.5 billion",
                    category: "Mid-Cap",
                    color: "#10B981"
                },
                {
                    company: "Blue Apron Holdings",
                    symbol: "APRN",
                    shares: "38.5 million",
                    price: "$31.17",
                    marketCap: "$1.2 billion",
                    category: "Small-Cap",
                    color: "#F59E0B"
                },
                {
                    company: "Aspen Group Inc.",
                    symbol: "ASPU",
                    shares: "25.7 million",
                    price: "$9.73",
                    marketCap: "$250 million",
                    category: "Micro-Cap",
                    color: "#FF4444"
                }
            ];

            // Chart for market cap distribution
            React.useEffect(() => {
                if (chartRef.current && activeTab === 'classifications' && !showingExample) {
                    if (chart) {
                        chart.destroy();
                    }

                    const ctx = chartRef.current.getContext('2d');
                    
                    const newChart = new Chart(ctx, {
                        type: 'pie',
                        data: {
                            labels: marketCapData.marketCapDistribution.map(d => d.category),
                            datasets: [{
                                data: marketCapData.marketCapDistribution.map(d => d.value),
                                backgroundColor: marketCapData.marketCapDistribution.map(d => d.color),
                                borderColor: isDarkMode ? '#111827' : 'white',
                                borderWidth: 2
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: true,
                                    position: 'right',
                                    labels: {
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563',
                                        font: {
                                            size: 11
                                        },
                                        boxWidth: 15
                                    }
                                },
                                tooltip: {
                                    enabled: true,
                                    backgroundColor: isDarkMode ? '#374151' : 'white',
                                    titleColor: isDarkMode ? '#fff' : '#000',
                                    bodyColor: isDarkMode ? '#fff' : '#000',
                                    borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                    borderWidth: 1,
                                    padding: 10,
                                    displayColors: true,
                                    callbacks: {
                                        label: function(context) {
                                            const value = context.raw;
                                            const total = context.dataset.data.reduce((acc, val) => acc + val, 0);
                                            const percentage = ((value / total) * 100).toFixed(1);
                                            return `$${value} trillion (${percentage}%)`;
                                        }
                                    }
                                }
                            }
                        }
                    });
                    setChart(newChart);
                }
            }, [activeTab, isDarkMode, showingExample]);
            // Chart for top companies by market cap
            React.useEffect(() => {
                if (chartRef.current && activeTab === 'classifications' && showingExample) {
                    if (chart) {
                        chart.destroy();
                    }

                    const ctx = chartRef.current.getContext('2d');
                    
                    const topCompanies = marketCapData.topCompanies.slice(0, 10); // Top 10 companies
                    
                    const newChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: topCompanies.map(c => c.symbol),
                            datasets: [{
                                label: 'Market Cap (Billions USD)',
                                data: topCompanies.map(c => c.marketCap),
                                backgroundColor: topCompanies.map(c => c.color),
                                borderColor: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    enabled: true,
                                    backgroundColor: isDarkMode ? '#374151' : 'white',
                                    titleColor: isDarkMode ? '#fff' : '#000',
                                    bodyColor: isDarkMode ? '#fff' : '#000',
                                    borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                    borderWidth: 1,
                                    padding: 10,
                                    displayColors: true,
                                    callbacks: {
                                        label: function(context) {
                                            const company = topCompanies[context.dataIndex];
                                            return [
                                                `${company.name} (${company.symbol})`,
                                                `Market Cap: $${company.marketCap} billion`,
                                                `Category: ${company.category}`
                                            ];
                                        }
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    grid: {
                                        color: isDarkMode ? '#374151' : '#e5e7eb'
                                    },
                                    ticks: {
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563',
                                        callback: function(value) {
                                            return '$' + value + 'B';
                                        }
                                    },
                                    title: {
                                        display: true,
                                        text: 'Market Capitalization (Billions USD)',
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: isDarkMode ? '#374151' : '#e5e7eb'
                                    },
                                    ticks: {
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    }
                                }
                            }
                        }
                    });
                    setChart(newChart);
                }
            }, [activeTab, isDarkMode, showingExample]);

            return (
                <div className="min-h-screen bg-gray-900 py-8 text-white">
                    <div className="w-full max-w-2xl mx-auto p-4">
                        <div className="rounded-lg shadow-lg p-6 bg-gray-800">
                            <h2 className="text-2xl font-bold mb-4 text-white">
                                Market Capitalization
                            </h2>
                            
                            <div className="mb-6 bg-gray-700 p-4 rounded-lg">
                                <div className="text-sm text-gray-400 mb-1">Definition</div>
                                <p className="text-gray-200">
                                    The total market value of a company's outstanding shares, calculated by multiplying the current share price by the total number of outstanding shares. It serves as a key indicator of company size and is used for classification into large-cap, mid-cap, and small-cap categories.
                                </p>
                            </div>

                            <div className="mb-4 flex">
                                <button
                                    className={`px-4 py-2 ${activeTab === 'classifications' ? 'bg-blue-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tl-lg rounded-bl-lg`}
                                    onClick={() => setActiveTab('classifications')}
                                >
                                    Classifications
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'calculation' ? 'bg-blue-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('calculation')}
                                >
                                    Calculation
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'importance' ? 'bg-blue-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('importance')}
                                >
                                    Importance
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'limitations' ? 'bg-blue-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tr-lg rounded-br-lg`}
                                    onClick={() => setActiveTab('limitations')}
                                >
                                    Limitations
                                </button>
                            </div>

                            {activeTab === 'classifications' && (
                                <>
                                    <div className="flex mb-4">
                                        <button
                                            className={`px-4 py-2 rounded-tl-lg rounded-bl-lg ${!showingExample ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                            onClick={() => setShowingExample(false)}
                                        >
                                            Market Cap Distribution
                                        </button>
                                        <button
                                            className={`px-4 py-2 rounded-tr-lg rounded-br-lg ${showingExample ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                            onClick={() => setShowingExample(true)}
                                        >
                                            Top Companies
                                        </button>
                                    </div>

                                    <div className="h-64 mb-6">
                                        <canvas ref={chartRef}></canvas>
                                    </div>

                                    {showingExample && (
                                        <div className="mb-6 bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-blue-400 mb-2">Top 10 Companies by Market Cap</h4>
                                            <p className="text-sm text-gray-300 mb-4">The chart above shows the world's largest publicly traded companies ranked by their market capitalization in billions of USD.</p>
                                            
                                            <div className="grid grid-cols-1 gap-2">
                                                {marketCapData.topCompanies.slice(0, 5).map((company, index) => (
                                                    <div key={index} className="bg-gray-800 p-2 rounded-lg">
                                                        <div className="flex justify-between items-center">
                                                            <div className="flex items-center">
                                                                <div className="w-3 h-3 rounded-full mr-2" style={{ backgroundColor: company.color }}></div>
                                                                <div>
                                                                    <div className="font-semibold">{company.name} ({company.symbol})</div>
                                                                    <div className="text-xs text-gray-400">{company.category}</div>
                                                                </div>
                                                            </div>
                                                            <div className="text-right">
                                                                <div className="text-sm font-semibold">${company.marketCap.toLocaleString()} billion</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {!showingExample && (
                                        <div className="mb-6 bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-blue-400 mb-2">Market Cap Classifications</h4>
                                            <p className="text-sm text-gray-300 mb-4">Companies are categorized into different market cap classifications based on their total market value. The pie chart shows the global distribution of market cap across these categories.</p>
                                            
                                            <div className="space-y-4">
                                                {Object.keys(marketCapData.marketCapCategories).map((category, index) => {
                                                    const data = marketCapData.marketCapCategories[category];
                                                    return (
                                                        <div key={index} className="bg-gray-800 p-3 rounded-lg" style={{ borderLeft: `4px solid ${data.color}` }}>
                                                            <div className="flex justify-between items-start">
                                                                <div>
                                                                    <div className="font-semibold" style={{ color: data.color }}>{category}</div>
                                                                    <div className="text-xs text-gray-400 mb-1">{data.range}</div>
                                                                </div>
                                                                <div className="text-xs bg-gray-700 px-2 py-1 rounded">
                                                                    Examples: {marketCapData.marketCapExamples[category].map(ex => ex.name).join(", ")}
                                                                </div>
                                                            </div>
                                                            <div className="text-xs text-gray-300 mt-1">{data.description}</div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    )}
                                </>
                            )}
                            {activeTab === 'calculation' && (
                <div className="mb-6">
                    <h3 className="text-lg font-semibold mb-3 text-blue-400">Calculating Market Capitalization</h3>
                    
                    <div className="bg-gray-700 p-4 rounded-lg mb-4">
                        <div className="flex flex-col items-center">
                            <div className="bg-blue-900 bg-opacity-40 p-3 rounded-lg mb-4 text-center">
                                <div className="text-lg font-semibold">Market Cap = Share Price × Outstanding Shares</div>
                            </div>
                            
                            <div className="flex items-center justify-center mb-4">
                                <div className="bg-gray-800 p-3 rounded-lg text-center mx-2">
                                    <div className="text-sm font-semibold text-blue-400">Current Share Price</div>
                                    <div className="text-xs text-gray-300">The latest trading price of a single share</div>
                                </div>
                                <div className="text-2xl mx-2">×</div>
                                <div className="bg-gray-800 p-3 rounded-lg text-center mx-2">
                                    <div className="text-sm font-semibold text-blue-400">Outstanding Shares</div>
                                    <div className="text-xs text-gray-300">Total number of shares issued by the company</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div className="mb-4 text-center text-sm text-gray-300">
                        Below are examples of market cap calculations for companies in different categories:
                    </div>
                    
                    <div className="space-y-3">
                        {calculationExamples.map((example, index) => (
                            <div key={index} className="bg-gray-700 p-3 rounded-lg" style={{ borderLeft: `4px solid ${example.color}` }}>
                                <div className="flex justify-between items-center mb-2">
                                    <div>
                                        <div className="font-semibold">{example.company} ({example.symbol})</div>
                                        <div className="text-xs text-gray-400">{example.category}</div>
                                    </div>
                                </div>
                                <div className="bg-gray-800 p-3 rounded-lg">
                                    <div className="grid grid-cols-3 gap-2 text-center">
                                        <div>
                                            <div className="text-xs text-gray-400">Share Price</div>
                                            <div className="text-sm font-semibold">{example.price}</div>
                                        </div>
                                        <div>
                                            <div className="text-xs text-gray-400">Outstanding Shares</div>
                                            <div className="text-sm font-semibold">{example.shares}</div>
                                        </div>
                                        <div>
                                            <div className="text-xs text-gray-400">Market Cap</div>
                                            <div className="text-sm font-semibold">{example.marketCap}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            )}

            {activeTab === 'importance' && (
                <div className="mb-6">
                    <h3 className="text-lg font-semibold mb-3 text-blue-400">Importance of Market Capitalization</h3>
                    
                    <div className="bg-gray-700 p-4 rounded-lg space-y-4">
                        <div className="flex items-start">
                            <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                            <div>
                                <p className="font-semibold">Index Inclusion</p>
                                <p className="text-gray-200 text-sm">Market cap determines eligibility for inclusion in major market indices such as the S&P 500, Russell 2000, or MSCI indices. This affects visibility, liquidity, and institutional investment.</p>
                            </div>
                        </div>
                        
                        <div className="flex items-start">
                            <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                            <div>
                                <p className="font-semibold">Investment Strategies</p>
                                <p className="text-gray-200 text-sm">Investors use market cap to build diversified portfolios across different size segments. Each market cap category has distinct risk-return characteristics that can be leveraged in portfolio construction.</p>
                            </div>
                        </div>
                        
                        <div className="flex items-start">
                            <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                            <div>
                                <p className="font-semibold">Risk Assessment</p>
                                <p className="text-gray-200 text-sm">Market cap helps investors gauge relative risk. Larger companies typically offer more stability but slower growth, while smaller companies often present higher growth potential with increased volatility.</p>
                            </div>
                        </div>
                        
                        <div className="flex items-start">
                            <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                            <div>
                                <p className="font-semibold">Competitive Analysis</p>
                                <p className="text-gray-200 text-sm">Market cap provides a standardized metric for comparing companies across different industries and regions. It helps assess relative market position and industry influence.</p>
                            </div>
                        </div>
                        
                        <div className="flex items-start">
                            <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                            <div>
                                <p className="font-semibold">Acquisition Potential</p>
                                <p className="text-gray-200 text-sm">Market cap influences a company's potential as an acquisition target. Smaller companies are more feasible acquisition targets for larger corporations or private equity firms.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="mt-4 bg-gray-700 p-4 rounded-lg">
                        <h4 className="font-semibold text-center text-blue-400 mb-3">Market Cap-Based Investment Products</h4>
                        <div className="grid grid-cols-2 gap-4">
                            <div className="bg-gray-800 p-3 rounded-lg">
                                <div className="font-semibold mb-1">Index Funds</div>
                                <div className="text-xs text-gray-300 mb-2">Examples:</div>
                                <div className="text-xs text-gray-300">• Vanguard Large Cap ETF (VV)</div>
                                <div className="text-xs text-gray-300">• iShares Russell 2000 ETF (IWM)</div>
                                <div className="text-xs text-gray-300">• SPDR S&P 600 Small Cap ETF (SLY)</div>
                            </div>
                            <div className="bg-gray-800 p-3 rounded-lg">
                                <div className="font-semibold mb-1">Style-Based Funds</div>
                                <div className="text-xs text-gray-300 mb-2">Examples:</div>
                                <div className="text-xs text-gray-300">• Vanguard Small-Cap Value ETF (VBR)</div>
                                <div className="text-xs text-gray-300">• iShares S&P Mid-Cap 400 Growth (IJK)</div>
                                <div className="text-xs text-gray-300">• Schwab Large-Cap Growth ETF (SCHG)</div>
                            </div>
                        </div>
                    </div>
                </div>
            )}

            {activeTab === 'limitations' && (
                <div className="mb-6">
                    <h3 className="text-lg font-semibold mb-3 text-blue-400">Limitations of Market Capitalization</h3>
                    
                    <div className="relative h-80 mb-4 bg-gray-700 rounded-lg overflow-hidden">
                        {/* Step 1: Price Volatility */}
                        {currentStep === 1 && (
                            <div className="absolute inset-0 p-4">
                                <h3 className="text-lg font-semibold mb-2 text-center text-blue-400">Price Volatility</h3>
                                <div className="flex flex-col h-60 overflow-y-auto">
                                    <div className="bg-gray-800 p-4 rounded-lg mb-4">
                                        <p className="text-sm text-gray-300 mb-3">Market cap fluctuates with share price, which can be affected by short-term market sentiment, rather than fundamental changes in company value.</p>
                                        
                                        <div className="bg-gray-700 p-3 rounded-lg mb-4">
                                            <div className="flex items-center justify-between mb-2">
                                                <div className="text-sm font-semibold">Company XYZ</div>
                                                <div className="text-sm">100M Shares Outstanding</div>
                                            </div>
                                            <div className="space-y-3">
                                                <div className="flex justify-between items-center">
                                                    <div className="text-sm">Day 1: $50 per share</div>
                                                    <div className="font-semibold">Market Cap: $5 billion</div>
                                                </div>
                                                <div className="flex justify-between items-center">
                                                    <div className="text-sm">Day 2: $45 per share <span className="text-red-400">(10% drop)</span></div>
                                                    <div className="font-semibold">Market Cap: $4.5 billion</div>
                                                </div>
                                                <div className="flex justify-between items-center">
                                                    <div className="text-sm">Day 5: $55 per share <span className="text-green-400">(22% rise)</span></div>
                                                    <div className="font-semibold">Market Cap: $5.5 billion</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="text-sm text-gray-300">
                                            <p className="mb-2"><span className="font-semibold">Implications:</span> A company's true value doesn't necessarily change as dramatically as short-term price movements suggest. Market cap can fluctuate significantly during market volatility without changes to business fundamentals.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Step 2: Not Reflecting Total Value */}
                        {currentStep === 2 && (
                            <div className="absolute inset-0 p-4">
                                <h3 className="text-lg font-semibold mb-2 text-center text-blue-400">Doesn't Reflect Total Company Value</h3>
                                <div className="flex flex-col h-60 overflow-y-auto">
                                    <div className="bg-gray-800 p-4 rounded-lg mb-4">
                                        <p className="text-sm text-gray-300 mb-3">Market cap only represents equity value and doesn't account for debt, cash reserves, or other assets and liabilities.</p>
                                        
                                        <div className="grid grid-cols-2 gap-4 mb-4">
                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                <div className="text-center font-semibold mb-2">Company A</div>
                                                <div className="space-y-2 text-sm">
                                                    <div className="flex justify-between">
                                                        <span>Market Cap:</span>
                                                        <span>$10 billion</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Cash:</span>
                                                        <span className="text-green-400">$2 billion</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Debt:</span>
                                                        <span className="text-red-400">$1 billion</span>
                                                    </div>
                                                    <div className="border-t border-gray-600 pt-1 mt-1">
                                                        <div className="flex justify-between font-semibold">
                                                            <span>Enterprise Value:</span>
                                                            <span>$9 billion</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                <div className="text-center font-semibold mb-2">Company B</div>
                                                <div className="space-y-2 text-sm">
                                                    <div className="flex justify-between">
                                                        <span>Market Cap:</span>
                                                        <span>$10 billion</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Cash:</span>
                                                        <span className="text-green-400">$0.5 billion</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Debt:</span>
                                                        <span className="text-red-400">$5 billion</span>
                                                    </div>
                                                    <div className="border-t border-gray-600 pt-1 mt-1">
                                                        <div className="flex justify-between font-semibold">
                                                            <span>Enterprise Value:</span>
                                                            <span>$14.5 billion</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="text-sm text-gray-300">
                                            <p className="mb-2"><span className="font-semibold">Enterprise Value:</span> Many investors and analysts prefer enterprise value (EV = Market Cap + Debt - Cash) for more accurate company valuation, especially for comparisons across different capital structures.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Step 3: Different Classes of Shares */}
                        {currentStep === 3 && (
                            <div className="absolute inset-0 p-4">
                                <h3 className="text-lg font-semibold mb-2 text-center text-blue-400">Multiple Share Classes</h3>
                                <div className="flex flex-col h-60 overflow-y-auto">
                                    <div className="bg-gray-800 p-4 rounded-lg mb-4">
                                        <p className="text-sm text-gray-300 mb-3">Companies with multiple share classes can present challenges for accurate market cap calculation, especially when different classes have different voting rights or trading prices.</p>
                                        
                                        <div className="bg-gray-700 p-3 rounded-lg mb-4">
                                            <div className="text-center font-semibold mb-2">Dual-Class Example: Tech Co.</div>
                                            <div className="space-y-3 text-sm">
                                                <div className="grid grid-cols-2 gap-2">
                                                    <div className="bg-blue-900 bg-opacity-30 p-2 rounded-lg">
                                                        <div className="font-semibold mb-1">Class A Shares (Public)</div>
                                                        <div className="flex justify-between text-xs">
                                                            <span>Shares Outstanding:</span>
                                                            <span>500 million</span>
                                                        </div>
                                                        <div className="flex justify-between text-xs">
                                                            <span>Price per Share:</span>
                                                            <span>$50</span>
                                                        </div>
                                                        <div className="flex justify-between text-xs">
                                                            <span>Voting Rights:</span>
                                                            <span>1 vote per share</span>
                                                        </div>
                                                    </div>
                                                    <div className="bg-purple-900 bg-opacity-30 p-2 rounded-lg">
                                                        <div className="font-semibold mb-1">Class B Shares (Founders)</div>
                                                        <div className="flex justify-between text-xs">
                                                            <span>Shares Outstanding:</span>
                                                            <span>100 million</span>
                                                        </div>
                                                        <div className="flex justify-between text-xs">
                                                            <span>Not Publicly Traded</span>
                                                        </div>
                                                        <div className="flex justify-between text-xs">
                                                            <span>Voting Rights:</span>
                                                            <span>10 votes per share</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="border-t border-gray-600 pt-2 text-center">
                                                    <div className="font-semibold">Market Cap Calculation Challenges:</div>
                                                    <div className="text-xs">• How to value non-traded Class B shares?</div>
                                                    <div className="text-xs">• Control premium for super-voting shares?</div>
                                                    <div className="text-xs">• Reported market cap may only reflect Class A shares</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="text-sm text-gray-300">
                                            <p className="mb-2">Companies like Alphabet (Google), Meta (Facebook), and Berkshire Hathaway have multiple share classes with different voting rights, making true market cap potentially ambiguous.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Step 4: International Comparisons */}
                        {currentStep === 4 && (
                            <div className="absolute inset-0 p-4">
                                <h3 className="text-lg font-semibold mb-2 text-center text-blue-400">International Comparisons</h3>
                                <div className="flex flex-col h-60 overflow-y-auto">
                                    <div className="bg-gray-800 p-4 rounded-lg mb-4">
                                        <p className="text-sm text-gray-300 mb-3">Market cap comparisons across countries can be misleading due to different accounting standards, market structures, governance rules, and economic environments.</p>
                                        
                                        <div className="grid grid-cols-2 gap-4 mb-4">
                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                <div className="text-center font-semibold mb-2">Challenges</div>
                                                <div className="space-y-2 text-xs">
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-blue-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>Different accounting standards (GAAP vs. IFRS)</div>
                                                    </div>
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-blue-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>Varying disclosure requirements</div>
                                                    </div>
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-blue-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>Different corporate structures and governance</div>
                                                    </div>
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-blue-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>Currency fluctuations impact</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                <div className="text-center font-semibold mb-2">Market Differences</div>
                                                <div className="space-y-2 text-xs">
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-purple-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>U.S.: More public companies, higher retail participation</div>
                                                    </div>
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-purple-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>Europe: Fewer public companies, more bank financing</div>
                                                    </div>
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-purple-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>Japan: Significant cross-shareholdings</div>
                                                    </div>
                                                    <div className="flex items-start">
                                                        <div className="w-2 h-2 rounded-full bg-purple-500 mt-1 mr-1 flex-shrink-0"></div>
                                                        <div>Emerging Markets: Government ownership, limited float</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="text-sm text-gray-300">
                                            <p className="mb-2"><span className="font-semibold">Adjusted Metrics:</span> For international comparisons, analysts often use additional metrics beyond market cap, such as P/E ratios, EV/EBITDA, and free float adjustments for more meaningful analysis.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="flex justify-between">
                        <button 
                            onClick={prevStep}
                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                        >
                            Previous
                        </button>
                        <div className="flex space-x-2">
                            {[1, 2, 3, 4].map(i => (
                                <div 
                                    key={i}
                                    className={`w-2 h-2 rounded-full ${currentStep === i ? 'bg-blue-500' : 'bg-gray-500'}`}
                                    onClick={() => setCurrentStep(i)}
                                ></div>
                            ))}
                        </div>
                        <button 
                            onClick={nextStep}
                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                        >
                            Next
                        </button>
                    </div>
                </div>
            )}

            <div className="mt-6 bg-gray-700 p-4 rounded-lg">
                <div className="font-semibold mb-2 text-blue-400">Key Points</div>
                <div className="space-y-2">
                    <div className="flex items-start">
                        <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                        <p className="text-gray-200 text-sm">
                            <span className="font-semibold">Classification Tool:</span> Market cap provides a standardized method for categorizing companies by size and is widely used by indices, funds, and investors.
                        </p>
                    </div>
                    <div className="flex items-start">
                        <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                        <p className="text-gray-200 text-sm">
                            <span className="font-semibold">Risk-Return Profile:</span> Different market cap segments typically have distinct risk-return characteristics, with smaller caps offering higher growth potential but greater volatility.
                        </p>
                    </div>
                    <div className="flex items-start">
                        <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                        <p className="text-gray-200 text-sm">
                            <span className="font-semibold">One Metric Among Many:</span> While useful, market cap should be considered alongside other metrics like enterprise value, revenue, earnings, and growth rates for comprehensive analysis.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MarketCapVisual />);
    </script>
</body>
</html>