<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Limited Liability Visualization</title>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Set dark background by default */
        body {
            background-color: #111827;
            margin: 0;
            min-height: 100vh;
        }
        
        /* Scrollbar styling for dark mode */
        .step-content::-webkit-scrollbar {
            width: 10px;
        }
        
        .step-content::-webkit-scrollbar-track {
            background: #374151;
            border-radius: 5px;
        }
        
        .step-content::-webkit-scrollbar-thumb {
            background: #4B5563;
            border-radius: 5px;
        }
        
        .step-content::-webkit-scrollbar-thumb:hover {
            background: #6B7280;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const LimitedLiabilityVisual = () => {
            const [isDarkMode, setIsDarkMode] = React.useState(true);
            const [activeTab, setActiveTab] = React.useState('concept');
            const [currentStep, setCurrentStep] = React.useState(1);
            const [showingExample, setShowingExample] = React.useState(false);
            const chartRef = React.useRef(null);
            const [chart, setChart] = React.useState(null);
            const brandColor = "#079A4F"; // Brand green color

            React.useEffect(() => {
                const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
                setIsDarkMode(darkModeQuery.matches);

                const handler = (e) => setIsDarkMode(e.matches);
                darkModeQuery.addEventListener('change', handler);

                return () => darkModeQuery.removeEventListener('change', handler);
            }, []);

            const nextStep = () => {
                setCurrentStep(prev => prev < 4 ? prev + 1 : 1);
            };

            const prevStep = () => {
                setCurrentStep(prev => prev > 1 ? prev - 1 : 4);
            };

            React.useEffect(() => {
                if (chartRef.current) {
                    if (chart) {
                        chart.destroy();
                    }

                    const ctx = chartRef.current.getContext('2d');
                    
                    if (showingExample) {
                        // Comparison of risk exposure across different business structures
                        const data = {
                            labels: ['Sole Proprietorship', 'General Partnership', 'Limited Partnership', 'LLC', 'Corporation'],
                            datasets: [
                                {
                                    label: 'Personal Asset Risk (%)',
                                    data: [100, 100, 100, 0, 0],
                                    backgroundColor: '#FF4444',
                                    borderColor: '#FF4444',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Business Asset Risk (%)',
                                    data: [100, 100, 100, 100, 100],
                                    backgroundColor: '#3B82F6',
                                    borderColor: '#3B82F6',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Limited Partners Risk (%)',
                                    data: [0, 0, 0, 0, 0],
                                    backgroundColor: '#10B981',
                                    borderColor: '#10B981',
                                    borderWidth: 1
                                }
                            ]
                        };
                        
                        // Override the third dataset for Limited Partnership
                        data.datasets[2].data[2] = 100;
                        
                        const newChart = new Chart(ctx, {
                            type: 'bar',
                            data: data,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    x: {
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    },
                                    y: {
                                        beginAtZero: true,
                                        max: 100,
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        },
                                        title: {
                                            display: true,
                                            text: 'Asset Risk Exposure (%)',
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    }
                                },
                                plugins: {
                                    tooltip: {
                                        enabled: true,
                                        backgroundColor: isDarkMode ? '#374151' : 'white',
                                        titleColor: isDarkMode ? '#fff' : '#000',
                                        bodyColor: isDarkMode ? '#fff' : '#000',
                                        borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                        borderWidth: 1,
                                        padding: 10,
                                        displayColors: true,
                                        callbacks: {
                                            afterLabel: function(context) {
                                                const datasetLabel = context.dataset.label;
                                                const value = context.parsed.y;
                                                const label = context.label;
                                                
                                                if (value === 100) {
                                                    if (datasetLabel === 'Personal Asset Risk (%)') {
                                                        if (label === 'Sole Proprietorship' || label === 'General Partnership') {
                                                            return 'Owners have unlimited personal liability';
                                                        }
                                                    } else if (datasetLabel === 'Limited Partners Risk (%)') {
                                                        return 'Limited to investment amount';
                                                    }
                                                } else if (value === 0) {
                                                    if (datasetLabel === 'Personal Asset Risk (%)') {
                                                        return 'Limited liability protection';
                                                    }
                                                }
                                                return '';
                                            }
                                        }
                                    },
                                    legend: {
                                        display: true,
                                        labels: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    }
                                }
                            }
                        });
                        setChart(newChart);
                    } else {
                        // Conceptual visualization of limited liability
                        const data = {
                            labels: ['Without Limited Liability', 'With Limited Liability'],
                            datasets: [
                                {
                                    label: 'Investment Amount',
                                    data: [100, 100],
                                    backgroundColor: brandColor,
                                    borderColor: brandColor,
                                    borderWidth: 1
                                },
                                {
                                    label: 'Liability Exposure',
                                    data: [400, 100],
                                    backgroundColor: '#FF4444',
                                    borderColor: '#FF4444',
                                    borderWidth: 1
                                }
                            ]
                        };
                        
                        const newChart = new Chart(ctx, {
                            type: 'bar',
                            data: data,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    x: {
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    },
                                    y: {
                                        beginAtZero: true,
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563',
                                            callback: function(value) {
                                                return '$' + value;
                                            }
                                        },
                                        title: {
                                            display: true,
                                            text: 'Amount ($)',
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    }
                                },
                                plugins: {
                                    tooltip: {
                                        enabled: true,
                                        backgroundColor: isDarkMode ? '#374151' : 'white',
                                        titleColor: isDarkMode ? '#fff' : '#000',
                                        bodyColor: isDarkMode ? '#fff' : '#000',
                                        borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                        borderWidth: 1,
                                        padding: 10,
                                        displayColors: true,
                                        callbacks: {
                                            afterLabel: function(context) {
                                                const datasetLabel = context.dataset.label;
                                                const value = context.parsed.y;
                                                const label = context.label;
                                                
                                                if (datasetLabel === 'Liability Exposure') {
                                                    if (label === 'Without Limited Liability') {
                                                        return 'Includes personal assets';
                                                    } else {
                                                        return 'Limited to investment amount';
                                                    }
                                                }
                                                return '';
                                            }
                                        }
                                    },
                                    legend: {
                                        display: true,
                                        labels: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    }
                                }
                            }
                        });
                        setChart(newChart);
                    }
                }
            }, [showingExample, isDarkMode]);

            return (
                <div className="min-h-screen bg-gray-900 py-8 text-white">
                    <div className="w-full max-w-2xl mx-auto p-4">
                        <div className="rounded-lg shadow-lg p-6 bg-gray-800">
                            <h2 className="text-2xl font-bold mb-4 text-white">
                                Limited Liability
                            </h2>
                            
                            <div className="mb-6 bg-gray-700 p-4 rounded-lg">
                                <div className="text-sm text-gray-400 mb-1">Definition</div>
                                <p className="text-gray-200">
                                    A legal structure that restricts an investor's financial liability to the amount of capital they have invested in a business. This protection prevents shareholders from being personally responsible for a company's debts beyond their investment amount.
                                </p>
                            </div>

                            <div className="flex mb-4">
                                <button
                                    className={`px-4 py-2 rounded-tl-lg rounded-bl-lg ${!showingExample ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                    onClick={() => setShowingExample(false)}
                                >
                                    Concept
                                </button>
                                <button
                                    className={`px-4 py-2 rounded-tr-lg rounded-br-lg ${showingExample ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                    onClick={() => setShowingExample(true)}
                                >
                                    Business Structures
                                </button>
                            </div>

                            <div className="mb-6">
                                <div className="bg-gray-700 p-4 rounded-lg">
                                    <div className="text-sm text-gray-300 mb-2">
                                        {showingExample ? 
                                            "Comparison of asset risk exposure across different business structures. Limited liability entities (LLC, Corporation) protect personal assets from business obligations." : 
                                            "Visualization of financial risk with and without limited liability protection. Without protection, liability can extend well beyond the initial investment."}
                                    </div>
                                    <div className="h-64">
                                        <canvas ref={chartRef}></canvas>
                                    </div>
                                    <div className="mt-2 text-xs text-gray-400">
                                        {showingExample ? 
                                            "In sole proprietorships and general partnerships, owners face unlimited personal liability. Limited partnerships provide protection only for limited partners. LLCs and corporations offer comprehensive liability protection for all owners." : 
                                            "Limited liability caps an investor's risk at their invested capital, protecting personal assets like homes, vehicles, and non-business bank accounts from business creditors."}
                                    </div>
                                </div>
                            </div>
                            <div className="mb-4 flex">
                                <button
                                    className={`px-4 py-2 ${activeTab === 'concept' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tl-lg rounded-bl-lg`}
                                    onClick={() => setActiveTab('concept')}
                                >
                                    Concept
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'history' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('history')}
                                >
                                    History
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'entities' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('entities')}
                                >
                                    Entities
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'limitations' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tr-lg rounded-br-lg`}
                                    onClick={() => setActiveTab('limitations')}
                                >
                                    Limitations
                                </button>
                            </div>

                            <div className="bg-gray-700 p-4 rounded-lg">
                                {activeTab === 'concept' && (
                                    <div>
                                        <h3 className="text-lg font-semibold mb-4 text-green-400">How Limited Liability Works</h3>
                                        
                                        <div className="relative h-80 mb-4 bg-gray-800 rounded-lg overflow-hidden">
                                            {/* Step 1: Business Formation */}
                                            {currentStep === 1 && (
                                                <div className="absolute inset-0 p-4">
                                                    <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Step 1: Business Formation</h3>
                                                    <div className="step-content h-56 overflow-y-auto pr-2">
                                                        <div className="space-y-2">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Legal Entity Creation</div>
                                                                <div className="text-sm text-gray-300">
                                                                    Entrepreneurs establish a legally recognized entity separate from themselves as individuals by filing formation documents with government authorities.
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Entity Selection</div>
                                                                <div className="text-sm text-gray-300">
                                                                    Limited liability protection is available through:
                                                                </div>
                                                                <ul className="list-disc pl-5 mt-2 text-sm text-gray-300 space-y-1">
                                                                    <li>Corporations (C-Corps, S-Corps)</li>
                                                                    <li>Limited Liability Companies (LLCs)</li>
                                                                    <li>Limited Partnerships (for limited partners only)</li>
                                                                    <li>Limited Liability Partnerships (LLPs)</li>
                                                                </ul>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Legal Separation</div>
                                                                <div className="text-sm text-gray-300">
                                                                    The "corporate veil" establishes a legal separation between:
                                                                </div>
                                                                <div className="grid grid-cols-2 gap-2 mt-2">
                                                                    <div className="bg-gray-800 p-2 rounded text-sm">
                                                                        <div className="font-semibold text-amber-400">Business Entity</div>
                                                                        <div className="text-xs text-gray-300 mt-1">
                                                                            Has its own legal identity, rights, and obligations
                                                                        </div>
                                                                    </div>
                                                                    <div className="bg-gray-800 p-2 rounded text-sm">
                                                                        <div className="font-semibold text-amber-400">Owners/Shareholders</div>
                                                                        <div className="text-xs text-gray-300 mt-1">
                                                                            Treated as legally distinct from the business itself
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                            {/* Step 2: Capital Investment */}
                                            {currentStep === 2 && (
                                                <div className="absolute inset-0 p-4">
                                                    <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Step 2: Capital Investment</h3>
                                                    <div className="step-content h-56 overflow-y-auto pr-2">
                                                        <div className="space-y-2">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Shareholder Investment</div>
                                                                <div className="text-sm text-gray-300">
                                                                    Investors provide capital to the business in exchange for ownership stakes (shares or membership interests).
                                                                </div>
                                                                <div className="mt-2 bg-gray-800 p-2 rounded text-xs text-gray-300">
                                                                    <div className="font-semibold text-center text-blue-400">Investment Transaction</div>
                                                                    <div className="flex items-center justify-center mt-2">
                                                                        <div className="text-center">
                                                                            <div>Investor</div>
                                                                            <div className="text-green-400">$100,000</div>
                                                                        </div>
                                                                        <div className="mx-3">â†’</div>
                                                                        <div className="text-center">
                                                                            <div>Company</div>
                                                                            <div className="text-amber-400">10% Ownership</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Risk Limitation</div>
                                                                <div className="text-sm text-gray-300">
                                                                    The capital contribution represents the maximum financial exposure for the investor under limited liability protection.
                                                                </div>
                                                                <div className="mt-2 text-xs text-gray-400">
                                                                    <div className="font-semibold text-center">Investor Financial Risk Profile</div>
                                                                    <div className="grid grid-cols-2 gap-2 mt-1">
                                                                        <div className="bg-green-900 bg-opacity-30 p-2 rounded text-center">
                                                                            <div>At Risk</div>
                                                                            <div className="font-semibold">$100,000</div>
                                                                            <div>(Investment Amount)</div>
                                                                        </div>
                                                                        <div className="bg-red-900 bg-opacity-30 p-2 rounded text-center">
                                                                            <div>Protected</div>
                                                                            <div className="font-semibold">All Personal Assets</div>
                                                                            <div>(Home, Savings, etc.)</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Capital Utilization</div>
                                                                <div className="text-sm text-gray-300">
                                                                    The invested capital becomes company property, used for business operations, growth, and meeting obligations.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                            {/* Step 3: Business Operations */}
                                            {currentStep === 3 && (
                                                <div className="absolute inset-0 p-4">
                                                    <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Step 3: Business Operations</h3>
                                                    <div className="step-content h-56 overflow-y-auto pr-2">
                                                        <div className="space-y-2">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Entity Operations</div>
                                                                <div className="text-sm text-gray-300">
                                                                    The business enters contracts, takes on debt, and carries liabilities as a separate legal entity.
                                                                </div>
                                                                <div className="mt-2 bg-gray-800 p-2 rounded text-xs">
                                                                    <div className="font-semibold text-amber-400">Examples of Company Obligations:</div>
                                                                    <ul className="list-disc pl-5 mt-1 text-gray-300 space-y-1">
                                                                        <li>Bank loans and credit lines</li>
                                                                        <li>Supplier contracts and accounts payable</li>
                                                                        <li>Commercial leases</li>
                                                                        <li>Employee wages and benefits</li>
                                                                        <li>Customer warranties and service agreements</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Corporate Governance</div>
                                                                <div className="text-sm text-gray-300">
                                                                    Maintaining proper governance is essential for preserving limited liability protection:
                                                                </div>
                                                                <ul className="list-disc pl-5 mt-2 text-xs text-gray-300 space-y-1">
                                                                    <li>Keeping business and personal finances separate</li>
                                                                    <li>Maintaining adequate capitalization</li>
                                                                    <li>Following corporate formalities (meetings, minutes, resolutions)</li>
                                                                    <li>Using proper company signage and documentation</li>
                                                                    <li>Filing required reports and paying business taxes</li>
                                                                </ul>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Creditor Awareness</div>
                                                                <div className="text-sm text-gray-300">
                                                                    Creditors and business partners understand they're doing business with a limited liability entity and factor this into their risk calculations.
                                                                </div>
                                                                <div className="mt-2 text-xs text-gray-400">
                                                                    Sophisticated creditors may require additional protections like personal guarantees for significant loans to small businesses with limited operating history.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                            {/* Step 4: Business Challenges */}
                                            {currentStep === 4 && (
                                                <div className="absolute inset-0 p-4">
                                                    <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Step 4: Business Challenges</h3>
                                                    <div className="step-content h-56 overflow-y-auto pr-2">
                                                        <div className="space-y-2">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Business Difficulties</div>
                                                                <div className="text-sm text-gray-300">
                                                                    When a company faces financial challenges, limited liability protection becomes most valuable.
                                                                </div>
                                                                <div className="mt-2 bg-gray-800 p-2 rounded text-xs">
                                                                    <div className="font-semibold text-amber-400 mb-1">Scenario: Business Insolvency</div>
                                                                    <div className="grid grid-cols-2 gap-2">
                                                                        <div>
                                                                            <div className="font-semibold">Company Assets:</div>
                                                                            <div>$500,000</div>
                                                                        </div>
                                                                        <div>
                                                                            <div className="font-semibold">Company Liabilities:</div>
                                                                            <div className="text-red-400">$800,000</div>
                                                                        </div>
                                                                    </div>
                                                                    <div className="mt-2">
                                                                        <div className="font-semibold">Shortfall: $300,000</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Creditor Recourse</div>
                                                                <div className="text-sm text-gray-300">
                                                                    Limited liability means creditors can only seek repayment from company assets, not from the personal assets of owners.
                                                                </div>
                                                                <div className="grid grid-cols-2 gap-2 mt-2 text-xs">
                                                                    <div className="bg-gray-800 p-2 rounded">
                                                                        <div className="font-semibold text-green-400">Creditors CAN claim against:</div>
                                                                        <ul className="list-disc pl-5 mt-1 text-gray-300 space-y-1">
                                                                            <li>Business bank accounts</li>
                                                                            <li>Company-owned property</li>
                                                                            <li>Business inventory</li>
                                                                            <li>Accounts receivable</li>
                                                                            <li>Other business assets</li>
                                                                        </ul>
                                                                    </div>
                                                                    <div className="bg-gray-800 p-2 rounded">
                                                                        <div className="font-semibold text-red-400">Creditors CANNOT claim against:</div>
                                                                        <ul className="list-disc pl-5 mt-1 text-gray-300 space-y-1">
                                                                            <li>Personal homes</li>
                                                                            <li>Personal vehicles</li>
                                                                            <li>Personal bank accounts</li>
                                                                            <li>Personal investments</li>
                                                                            <li>Other personal assets</li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-blue-400 font-semibold mb-1">Resolution Process</div>
                                                                <div className="text-sm text-gray-300">
                                                                    In worst-case scenarios, the business may enter formal dissolution, bankruptcy, or reorganization.
                                                                </div>
                                                                <div className="text-xs text-gray-400 mt-2">
                                                                    Shareholders/owners typically lose their invested capital if the business fails, but their potential loss is capped at this amount.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}
                                        </div>

                                        <div className="flex justify-between">
                                            <button 
                                                onClick={prevStep}
                                                className="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-600 transition-colors"
                                            >
                                                Previous
                                            </button>
                                            <div className="flex space-x-2">
                                                {[1, 2, 3, 4].map(i => (
                                                    <div 
                                                        key={i}
                                                        className={`w-2 h-2 rounded-full ${currentStep === i ? 'bg-green-500' : 'bg-gray-500'}`}
                                                        onClick={() => setCurrentStep(i)}
                                                    ></div>
                                                ))}
                                            </div>
                                            <button 
                                                onClick={nextStep}
                                                className="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-600 transition-colors"
                                            >
                                                Next
                                            </button>
                                        </div>
                                    </div>
                                )}
                                {activeTab === 'history' && (
                                    <div className="space-y-4 max-h-96 overflow-y-auto pr-2">
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-blue-400 font-semibold mb-2">Early Development</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Historical Roots:</span> Limited liability concepts emerged in ancient Rome with "societas publicanorum," allowing investors to limit their risk in maritime ventures.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Medieval Trading:</span> The commenda partnership in medieval Italian city-states provided passive investors (commendators) with limited liability while active partners bore unlimited risk.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Early Trading Companies:</span> The Dutch East India Company (1602) and British East India Company pioneered limited liability for shareholders in large trading ventures.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-green-400 font-semibold mb-2">Modern Corporate Development</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <p className="text-gray-200 text-sm">
                                                            <span className="font-semibold">British Limited Liability Act (1855):</span> The first comprehensive legislation establishing limited liability for ordinary companies, removing the need for special royal charter.
                                                        </p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <p className="text-gray-200 text-sm">
                                                            <span className="font-semibold">American Development:</span> Limited liability protection gained legal recognition in various states throughout the 19th century, with New York's 1811 manufacturing statute being an early example.
                                                        </p>
                                                    </div>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <div>
                                                        <p className="text-gray-200 text-sm">
                                                            <span className="font-semibold">Legal Precedents:</span> The landmark Salomon v. Salomon & Co. (1897) case in the UK established the corporate personhood principle, reinforcing limited liability protection.
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-amber-400 font-semibold mb-2">Modern Innovations</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Limited Liability Company (LLC):</span> First created in Wyoming in 1977, LLCs combined corporate-style liability protection with partnership tax benefits and simplified governance.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Limited Liability Partnership (LLP):</span> Developed in the 1990s to protect individual partners in professional service firms from malpractice claims against other partners.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Global Adoption:</span> Limited liability business structures have now been adopted worldwide, becoming fundamental to modern capitalism and entrepreneurship.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-purple-400 font-semibold mb-2">Economic Impact</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Capital Formation:</span> Limited liability enabled broader participation in investment by reducing individual risk, leading to more significant capital accumulation.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Entrepreneurship:</span> Reduced personal financial risk has encouraged entrepreneurship, innovation, and business formation by limiting the downside of business failure.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Economic Growth:</span> Many economic historians consider limited liability to be one of the most important legal innovations enabling modern industrial and post-industrial economies.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                                
                                {activeTab === 'entities' && (
                                    <div className="space-y-4 max-h-96 overflow-y-auto pr-2">
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-gray-800 p-4 rounded-lg">
                                                <h4 className="text-blue-400 font-semibold mb-2">Corporation</h4>
                                                <div className="space-y-2 text-sm">
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Ownership:</span> Shareholders
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Management:</span> Board of Directors, Officers
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Taxation:</span> Corporate level (C-Corp) or Pass-through (S-Corp)
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Formalities:</span> High (meetings, minutes, bylaws)
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Best For:</span> Large businesses, public companies, complex structures
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="bg-gray-800 p-4 rounded-lg">
                                                <h4 className="text-green-400 font-semibold mb-2">Limited Liability Company (LLC)</h4>
                                                <div className="space-y-2 text-sm">
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Ownership:</span> Members
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Management:</span> Members or Managers
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Taxation:</span> Pass-through (flexible options)
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Formalities:</span> Medium (operating agreement)
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Best For:</span> Small-medium businesses, flexible operations
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-4">
                                            <div className="bg-gray-800 p-4 rounded-lg">
                                                <h4 className="text-amber-400 font-semibold mb-2">Limited Partnership (LP)</h4>
                                                <div className="space-y-2 text-sm">
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Ownership:</span> General & Limited Partners
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Management:</span> General Partners only
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Liability Protection:</span> Limited Partners only
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Taxation:</span> Pass-through
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Best For:</span> Investment funds, family businesses, passive investors
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="bg-gray-800 p-4 rounded-lg">
                                                <h4 className="text-purple-400 font-semibold mb-2">Limited Liability Partnership (LLP)</h4>
                                                <div className="space-y-2 text-sm">
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Ownership:</span> Partners
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Management:</span> Partners
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Liability Protection:</span> Partners protected from other partners' negligence
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Taxation:</span> Pass-through
                                                    </div>
                                                    <div className="bg-gray-700 p-2 rounded-lg">
                                                        <span className="font-semibold">Best For:</span> Professional service firms (law, accounting, etc.)
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-red-400 font-semibold mb-2">Entity Comparison: Key Differentiators</h4>
                                            <div className="overflow-x-auto">
                                                <table className="min-w-full text-sm">
                                                    <thead>
                                                        <tr className="text-gray-400 text-left">
                                                            <th className="p-2">Feature</th>
                                                            <th className="p-2">Corporation</th>
                                                            <th className="p-2">LLC</th>
                                                            <th className="p-2">LP</th>
                                                            <th className="p-2">LLP</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody className="text-gray-300">
                                                        <tr className="border-t border-gray-700">
                                                            <td className="p-2 font-semibold">Formation Cost</td>
                                                            <td className="p-2">High</td>
                                                            <td className="p-2">Medium</td>
                                                            <td className="p-2">Medium</td>
                                                            <td className="p-2">Medium</td>
                                                        </tr>
                                                        <tr className="border-t border-gray-700">
                                                            <td className="p-2 font-semibold">Ownership Transferability</td>
                                                            <td className="p-2">Easy</td>
                                                            <td className="p-2">Restricted</td>
                                                            <td className="p-2">Varies</td>
                                                            <td className="p-2">Restricted</td>
                                                        </tr>
                                                        <tr className="border-t border-gray-700">
                                                            <td className="p-2 font-semibold">Perpetual Existence</td>
                                                            <td className="p-2">Yes</td>
                                                            <td className="p-2">Varies</td>
                                                            <td className="p-2">No</td>
                                                            <td className="p-2">No</td>
                                                        </tr>
                                                        <tr className="border-t border-gray-700">
                                                            <td className="p-2 font-semibold">Capital Raising</td>
                                                            <td className="p-2">Excellent</td>
                                                            <td className="p-2">Good</td>
                                                            <td className="p-2">Good</td>
                                                            <td className="p-2">Limited</td>
                                                        </tr>
                                                        <tr className="border-t border-gray-700">
                                                            <td className="p-2 font-semibold">International Recognition</td>
                                                            <td className="p-2">High</td>
                                                            <td className="p-2">Medium</td>
                                                            <td className="p-2">Medium</td>
                                                            <td className="p-2">Varies</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                )}
                                
                                {activeTab === 'limitations' && (
                                    <div className="space-y-4 max-h-96 overflow-y-auto pr-2">
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-red-400 font-semibold mb-2">Piercing the Corporate Veil</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Definition:</span> A legal doctrine allowing courts to disregard limited liability protection in certain cases, making shareholders personally liable for company debts.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Common Grounds:</span> Fraud, undercapitalization, failure to observe corporate formalities, commingling of personal and business assets, or using the company as an "alter ego."
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-red-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Prevention:</span> Maintain proper corporate governance, adequate capitalization, separate finances, and use proper documentation in all business dealings.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-orange-400 font-semibold mb-2">Personal Guarantees</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-orange-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Contractual Override:</span> Creditors often require personal guarantees from owners of small businesses, effectively bypassing limited liability protection for specific obligations.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-orange-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Common Scenarios:</span> Bank loans, commercial real estate leases, equipment financing, and supplier credit agreements often require personal guarantees.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-orange-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Negotiation:</span> As businesses grow and establish stronger credit histories, personal guarantees may be reduced or eliminated through negotiation.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-yellow-400 font-semibold mb-2">Statutory Exceptions</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-yellow-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Trust Fund Doctrine:</span> Owners may be personally liable for unpaid employee wages, payroll taxes, and certain benefit contributions in many jurisdictions.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-yellow-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Environmental Liability:</span> Environmental laws may impose cleanup costs on company owners for hazardous waste or pollution, regardless of limited liability status.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-yellow-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Securities Laws:</span> Corporate officers, directors, and controlling shareholders may face personal liability for securities law violations, fraud, or misrepresentation.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-800 p-4 rounded-lg">
                                            <h4 className="text-purple-400 font-semibold mb-2">Personal Wrongdoing</h4>
                                            <div className="space-y-2">
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Direct Liability:</span> Limited liability never protects individuals from their own personal wrongdoing, negligence, or tortious acts, even if performed while working for the company.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Professional Malpractice:</span> Professionals cannot avoid liability for their own malpractice by operating through a limited liability entity.
                                                    </p>
                                                </div>
                                                <div className="flex items-start">
                                                    <div className="w-3 h-3 rounded-full bg-purple-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                    <p className="text-gray-200 text-sm">
                                                        <span className="font-semibold">Criminal Activity:</span> Limited liability provides no protection against criminal charges for illegal activities conducted through a business entity.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>

                            <div className="mt-6 bg-gray-700 p-4 rounded-lg">
                                <div className="font-semibold mb-2 text-gray-300">Key Limited Liability Benefits</div>
                                <div className="space-y-3">
                                    <div className="flex items-start">
                                        <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                        <p className="text-gray-200 text-sm">
                                            <span className="font-semibold">Risk Management:</span> Protects personal assets from business liabilities, limiting financial exposure to the amount invested.
                                        </p>
                                    </div>
                                    <div className="flex items-start">
                                        <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                        <p className="text-gray-200 text-sm">
                                            <span className="font-semibold">Investment Incentive:</span> Encourages entrepreneurship and capital investment by reducing the potential downside of business failure.
                                        </p>
                                    </div>
                                    <div className="flex items-start">
                                        <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                        <p className="text-gray-200 text-sm">
                                            <span className="font-semibold">Business Continuity:</span> Provides framework for ownership transfer and business succession, independent of individual owners.
                                        </p>
                                    </div>
                                    <div className="flex items-start">
                                        <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                        <p className="text-gray-200 text-sm">
                                            <span className="font-semibold">Capital Formation:</span> Enables broader participation in business investment by segregating business and personal finances.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LimitedLiabilityVisual />);
    </script>
</body>
</html>