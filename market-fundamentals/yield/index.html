<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yield Visualization</title>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Set dark background by default */
        body {
            background-color: #111827;
            margin: 0;
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const YieldVisual = () => {
            const [isDarkMode, setIsDarkMode] = React.useState(true);
            const [activeTab, setActiveTab] = React.useState('types');
            const [currentStep, setCurrentStep] = React.useState(1);
            const [yieldType, setYieldType] = React.useState('dividend');
            const [comparisonMode, setComparisonMode] = React.useState('historical');
            const chartRef = React.useRef(null);
            const comparisonsChartRef = React.useRef(null);
            const [chart, setChart] = React.useState(null);
            const [comparisonsChart, setComparisonsChart] = React.useState(null);
            const brandColor = "#079A4F"; // Brand green color

            React.useEffect(() => {
                const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
                setIsDarkMode(darkModeQuery.matches);

                const handler = (e) => setIsDarkMode(e.matches);
                darkModeQuery.addEventListener('change', handler);

                return () => darkModeQuery.removeEventListener('change', handler);
            }, []);
            
            const nextStep = () => {
                setCurrentStep(prev => prev < 4 ? prev + 1 : 1);
            };

            const prevStep = () => {
                setCurrentStep(prev => prev > 1 ? prev - 1 : 4);
            };

            const yieldTypes = {
                dividend: {
                    name: "Dividend Yield",
                    description: "The annual dividend payment expressed as a percentage of a stock's current market price.",
                    formula: "Annual Dividends per Share ÷ Current Share Price × 100%",
                    example: "A stock priced at $50 with annual dividends of $2 has a dividend yield of 4%.",
                    considerations: "Higher yields may indicate value or risk. Stable companies typically offer 2-4%.",
                    color: "#3B82F6" // Blue
                },
                bond: {
                    name: "Bond Yield",
                    description: "The return an investor realizes on a bond, with multiple ways to calculate based on different factors.",
                    formula: "Current Yield: Annual Interest Payment ÷ Current Bond Price × 100%",
                    example: "A $950 bond with $60 annual coupon payment has a current yield of 6.32%.",
                    considerations: "Bond prices and yields move inversely. Higher yields often reflect higher risk.",
                    color: "#10B981" // Emerald
                },
                reit: {
                    name: "REIT Yield",
                    description: "The dividend yield from real estate investment trusts, which must distribute 90% of taxable income to shareholders.",
                    formula: "Annual Distributions per Share ÷ Current Share Price × 100%",
                    example: "A REIT priced at $25 with $2 annual distributions has a yield of 8%.",
                    considerations: "REITs typically offer higher yields than stocks but carry real estate market risk.",
                    color: "#F59E0B" // Amber
                },
                ytm: {
                    name: "Yield to Maturity",
                    description: "The total return anticipated on a bond if held until it matures, accounting for all payments and time value of money.",
                    formula: "Complex calculation based on coupon rate, time to maturity, and difference between price and face value.",
                    example: "A bond bought at discount may have a YTM of 5.5% despite a 5% coupon rate.",
                    considerations: "More comprehensive than current yield as it factors in capital gains/losses at maturity.",
                    color: "#EF4444" // Red
                }
            };

            // Chart for yield types comparison
            React.useEffect(() => {
                if (chartRef.current && activeTab === 'types') {
                    if (chart) {
                        chart.destroy();
                    }

                    const ctx = chartRef.current.getContext('2d');
                    
                    // Example data for different investment types and their typical yields
                    const categories = ["Treasury Bonds", "Corporate Bonds", "S&P 500 Stocks", "High-Dividend Stocks", "REITs"];
                    const yields = [3.5, 5.3, 2.1, 4.2, 6.8]; // Example yields (%)
                    
                    const backgroundColors = [
                        'rgba(59, 130, 246, 0.6)', // Blue
                        'rgba(16, 185, 129, 0.6)', // Emerald
                        'rgba(245, 158, 11, 0.6)', // Amber
                        'rgba(239, 68, 68, 0.6)',  // Red
                        'rgba(139, 92, 246, 0.6)'  // Purple
                    ];
                    
                    const newChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: categories,
                            datasets: [{
                                label: 'Typical Yield (%)',
                                data: yields,
                                backgroundColor: backgroundColors,
                                borderColor: isDarkMode ? 'rgba(255, 255, 255, 0.3)' : 'rgba(0, 0, 0, 0.3)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    enabled: true,
                                    backgroundColor: isDarkMode ? '#374151' : 'white',
                                    titleColor: isDarkMode ? '#fff' : '#000',
                                    bodyColor: isDarkMode ? '#fff' : '#000',
                                    borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                    borderWidth: 1,
                                    padding: 10,
                                    displayColors: true,
                                    callbacks: {
                                        label: function(context) {
                                            return `Yield: ${context.parsed.y}%`;
                                        }
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    title: {
                                        display: true,
                                        text: 'Yield (%)',
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    },
                                    grid: {
                                        color: isDarkMode ? '#374151' : '#e5e7eb'
                                    },
                                    ticks: {
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: isDarkMode ? '#374151' : '#e5e7eb'
                                    },
                                    ticks: {
                                        color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                    }
                                }
                            }
                        }
                    });
                    setChart(newChart);
                }
            }, [activeTab, isDarkMode]);

            // Chart for yield comparisons
            React.useEffect(() => {
                if (comparisonsChartRef.current && activeTab === 'comparisons') {
                    if (comparisonsChart) {
                        comparisonsChart.destroy();
                    }

                    const ctx = comparisonsChartRef.current.getContext('2d');
                    
                    if (comparisonMode === 'historical') {
                        // Historical yield data (example)
                        const years = ['2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024'];
                        const tenYearTreasury = [2.14, 1.84, 2.33, 2.91, 2.14, 0.93, 1.45, 2.33, 3.88, 4.30];
                        const spDividend = [2.11, 2.04, 1.89, 1.97, 1.91, 1.63, 1.33, 1.71, 1.65, 1.47];
                        const highYieldBonds = [8.76, 6.17, 5.72, 7.95, 5.41, 5.83, 4.35, 8.92, 8.40, 7.25];
                        
                        const newChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: years,
                                datasets: [
                                    {
                                        label: '10-Year Treasury',
                                        data: tenYearTreasury,
                                        borderColor: '#3B82F6', // Blue
                                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                        borderWidth: 2,
                                        tension: 0.3,
                                        pointRadius: 3
                                    },
                                    {
                                        label: 'S&P 500 Dividend',
                                        data: spDividend,
                                        borderColor: '#10B981', // Emerald
                                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                        borderWidth: 2,
                                        tension: 0.3,
                                        pointRadius: 3
                                    },
                                    {
                                        label: 'High-Yield Bonds',
                                        data: highYieldBonds,
                                        borderColor: '#EF4444', // Red
                                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                        borderWidth: 2,
                                        tension: 0.3,
                                        pointRadius: 3
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: true,
                                        position: 'top',
                                        labels: {
                                            color: isDarkMode ? '#E5E7EB' : '#4B5563',
                                            padding: 10
                                        }
                                    },
                                    tooltip: {
                                        enabled: true,
                                        backgroundColor: isDarkMode ? '#374151' : 'white',
                                        titleColor: isDarkMode ? '#fff' : '#000',
                                        bodyColor: isDarkMode ? '#fff' : '#000',
                                        borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                        borderWidth: 1,
                                        padding: 10,
                                        callbacks: {
                                            label: function(context) {
                                                return `${context.dataset.label}: ${context.parsed.y}%`;
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'Yield (%)',
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        },
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        },
                                        min: 0
                                    },
                                    x: {
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    }
                                }
                            }
                        });
                        setComparisonsChart(newChart);
                    } else {
                        // Risk vs Yield data (example)
                        const riskLevels = ['Very Low', 'Low', 'Moderate', 'High', 'Very High'];
                        const yields = [2.5, 4.0, 5.5, 7.0, 9.5]; // Example yields (%)
                        const investmentTypes = ['Treasury Bonds', 'Investment Grade Bonds', 'Dividend Stocks', 'High Yield Bonds', 'Distressed Debt'];
                        
                        const newChart = new Chart(ctx, {
                            type: 'scatter',
                            data: {
                                datasets: [{
                                    label: 'Risk vs. Yield',
                                    data: riskLevels.map((risk, i) => ({
                                        x: i,
                                        y: yields[i],
                                        investment: investmentTypes[i]
                                    })),
                                    backgroundColor: (context) => {
                                        const colors = [
                                            'rgba(59, 130, 246, 0.7)', // Blue
                                            'rgba(16, 185, 129, 0.7)', // Emerald
                                            'rgba(245, 158, 11, 0.7)', // Amber
                                            'rgba(239, 68, 68, 0.7)',  // Red
                                            'rgba(139, 92, 246, 0.7)'  // Purple
                                        ];
                                        return colors[context.dataIndex];
                                    },
                                    borderColor: isDarkMode ? 'rgba(255, 255, 255, 0.3)' : 'rgba(0, 0, 0, 0.3)',
                                    borderWidth: 1,
                                    pointRadius: 10,
                                    pointHoverRadius: 12
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: false
                                    },
                                    tooltip: {
                                        enabled: true,
                                        backgroundColor: isDarkMode ? '#374151' : 'white',
                                        titleColor: isDarkMode ? '#fff' : '#000',
                                        bodyColor: isDarkMode ? '#fff' : '#000',
                                        borderColor: isDarkMode ? '#4B5563' : '#E5E7EB',
                                        borderWidth: 1,
                                        padding: 10,
                                        callbacks: {
                                            title: function(tooltipItems) {
                                                return tooltipItems[0].raw.investment;
                                            },
                                            label: function(context) {
                                                return [
                                                    `Risk Level: ${riskLevels[context.dataIndex]}`,
                                                    `Typical Yield: ${context.parsed.y}%`
                                                ];
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'Yield (%)',
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        },
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        },
                                        min: 0
                                    },
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Risk Level',
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        },
                                        grid: {
                                            color: isDarkMode ? '#374151' : '#e5e7eb'
                                        },
                                        ticks: {
                                            callback: function(value) {
                                                return riskLevels[value];
                                            },
                                            color: isDarkMode ? '#9CA3AF' : '#4B5563'
                                        }
                                    }
                                }
                            }
                        });
                        setComparisonsChart(newChart);
                    }
                }
            }, [activeTab, comparisonMode, isDarkMode]);

            return (
                <div className="min-h-screen bg-gray-900 py-8 text-white">
                    <div className="w-full max-w-2xl mx-auto p-4">
                        <div className="rounded-lg shadow-lg p-6 bg-gray-800">
                            <h2 className="text-2xl font-bold mb-4 text-white">
                                Yield
                            </h2>
                            
                            <div className="mb-6 bg-gray-700 p-4 rounded-lg">
                                <div className="text-sm text-gray-400 mb-1">Definition</div>
                                <p className="text-gray-200">
                                    The income return on an investment, expressed as a percentage of the investment's cost or current market value. For stocks, yield typically refers to the dividend yield; for bonds, it often refers to the current yield or yield to maturity.
                                </p>
                            </div>

                            <div className="mb-4 flex">
                                <button
                                    className={`px-4 py-2 ${activeTab === 'types' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tl-lg rounded-bl-lg`}
                                    onClick={() => setActiveTab('types')}
                                >
                                    Types
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'calculation' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('calculation')}
                                >
                                    Calculation
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'comparisons' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'}`}
                                    onClick={() => setActiveTab('comparisons')}
                                >
                                    Comparisons
                                </button>
                                <button
                                    className={`px-4 py-2 ${activeTab === 'considerations' ? 'bg-green-800 text-white' : 'bg-gray-700 text-gray-300'} rounded-tr-lg rounded-br-lg`}
                                    onClick={() => setActiveTab('considerations')}
                                >
                                    Considerations
                                </button>
                            </div>

                            {/* Yield Types */}
                            {activeTab === 'types' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Types of Yield</h3>
                                    
                                    <div className="grid grid-cols-2 gap-2 mb-4">
                                        {Object.keys(yieldTypes).map(type => (
                                            <button
                                                key={type}
                                                className={`p-2 rounded-lg border-2 transition-colors ${yieldType === type ? 'border-white bg-gray-700' : 'border-gray-600 bg-gray-800'}`}
                                                style={{ borderLeftColor: yieldTypes[type].color }}
                                                onClick={() => setYieldType(type)}
                                            >
                                                <div className="font-semibold" style={{ color: yieldTypes[type].color }}>
                                                    {yieldTypes[type].name}
                                                </div>
                                            </button>
                                        ))}
                                    </div>

                                    <div className="bg-gray-700 p-4 rounded-lg mb-4">
                                        <h4 className="font-semibold text-lg mb-2" style={{ color: yieldTypes[yieldType].color }}>
                                            {yieldTypes[yieldType].name}
                                        </h4>
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: yieldTypes[yieldType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Description:</span>
                                                    <p className="text-gray-200 text-sm">{yieldTypes[yieldType].description}</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: yieldTypes[yieldType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Formula:</span>
                                                    <p className="text-gray-200 text-sm">{yieldTypes[yieldType].formula}</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: yieldTypes[yieldType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Example:</span>
                                                    <p className="text-gray-200 text-sm">{yieldTypes[yieldType].example}</p>
                                                </div>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full mt-1.5 mr-2 flex-shrink-0" style={{ backgroundColor: yieldTypes[yieldType].color }}></div>
                                                <div>
                                                    <span className="font-semibold">Considerations:</span>
                                                    <p className="text-gray-200 text-sm">{yieldTypes[yieldType].considerations}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-gray-700 p-4 rounded-lg">
                                        <h4 className="font-semibold text-lg mb-3 text-green-400">Typical Yields by Investment Type</h4>
                                        <div className="h-64 mb-4">
                                            <canvas ref={chartRef}></canvas>
                                        </div>
                                        <p className="text-gray-300 text-sm italic text-center">
                                            Chart shows representative yields across common investment types. Actual yields vary based on economic conditions, credit quality, and specific securities.
                                        </p>
                                    </div>
                                </div>
                            )}

                            {/* Yield Calculation Visualization */}
                            {activeTab === 'calculation' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Understanding Yield Calculations</h3>
                                    
                                    <div className="relative h-96 mb-4 bg-gray-700 rounded-lg overflow-hidden">
                                        {/* Step 1: Basic Concept */}
                                        {currentStep === 1 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-3 text-center text-green-400">Step 1: What is Yield?</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="bg-gray-800 p-4 rounded-lg mb-4 w-full">
                                                        <div className="text-center font-semibold mb-3">The Yield Concept</div>
                                                        <div className="flex items-center justify-center mb-4">
                                                            <div className="bg-gray-700 p-4 rounded-lg text-center w-full">
                                                                <div className="text-lg font-bold text-amber-400">Yield</div>
                                                                <div className="mt-2 text-sm">is the</div>
                                                                <div className="text-lg font-bold text-green-400 mt-1">Income Return</div>
                                                                <div className="mt-2 text-sm">expressed as a percentage of</div>
                                                                <div className="text-lg font-bold text-blue-400 mt-1">Investment Value</div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-700 p-3 rounded-lg mt-4">
                                                            <div className="text-center font-semibold mb-2">General Formula</div>
                                                            <div className="bg-gray-800 p-3 rounded-lg text-center">
                                                                <div className="text-amber-400 text-lg">
                                                                    Yield (%) = (Annual Income / Investment Value) × 100
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="grid grid-cols-2 gap-4 w-full">
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <div className="text-center font-semibold mb-2 text-blue-400">Income Components</div>
                                                            <div className="space-y-2">
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">Stock Dividends</span>
                                                                </div>
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">Bond Interest Payments</span>
                                                                </div>
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">REIT Distributions</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <div className="text-center font-semibold mb-2 text-green-400">Value Basis</div>
                                                            <div className="space-y-2">
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">Current Market Price</span>
                                                                </div>
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">Original Cost Basis</span>
                                                                </div>
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">Face/Par Value (Bonds)</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 2: Stock Example */}
                                        {currentStep === 2 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-2 text-center text-green-400">Step 2: Dividend Yield Example</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="bg-gray-800 p-4 rounded-lg mb-4 w-full">
                                                        <div className="grid grid-cols-2 gap-4">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-center font-semibold mb-3">Company Information</div>
                                                                <div className="space-y-3">
                                                                    <div className="flex justify-between">
                                                                        <span>Company:</span>
                                                                        <span className="font-semibold text-blue-400">ABC Corp</span>
                                                                    </div>
                                                                    <div className="flex justify-between">
                                                                        <span>Current Share Price:</span>
                                                                        <span className="font-semibold text-blue-400">$50.00</span>
                                                                    </div>
                                                                    <div className="flex justify-between">
                                                                        <span>Annual Dividend:</span>
                                                                        <span className="font-semibold text-green-400">$2.00 per share</span>
                                                                    </div>
                                                                    <div className="flex justify-between">
                                                                        <span>Dividend Frequency:</span>
                                                                        <span className="font-semibold">Quarterly ($0.50/quarter)</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-center font-semibold mb-3">Calculation</div>
                                                                <div className="space-y-3">
                                                                    <div className="bg-gray-800 p-2 rounded-lg">
                                                                        <div className="font-semibold mb-1">Formula</div>
                                                                        <div className="text-amber-400">
                                                                            Dividend Yield = (Annual Dividend / Share Price) × 100
                                                                        </div>
                                                                    </div>
                                                                    <div className="bg-gray-800 p-2 rounded-lg">
                                                                        <div className="font-semibold mb-1">Calculation</div>
                                                                        <div className="text-amber-400">
                                                                            Dividend Yield = ($2.00 / $50.00) × 100
                                                                        </div>
                                                                    </div>
                                                                    <div className="bg-gray-800 p-2 rounded-lg">
                                                                        <div className="font-semibold mb-1">Result</div>
                                                                        <div className="text-xl text-center text-green-400 font-bold">
                                                                            4.00%
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="bg-gray-800 p-4 rounded-lg w-full">
                                                        <div className="text-center font-semibold mb-3">What This Means</div>
                                                        <div className="space-y-3">
                                                            <div className="flex items-start">
                                                                <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                <p className="text-gray-200 text-sm">
                                                                    <span className="font-semibold">Income Return:</span> You're earning a 4% annual return on your investment in the form of dividends.
                                                                </p>
                                                            </div>
                                                            <div className="flex items-start">
                                                                <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                <p className="text-gray-200 text-sm">
                                                                    <span className="font-semibold">Comparison Basis:</span> You can compare this 4% yield to other investments to evaluate relative income potential.
                                                                </p>
                                                            </div>
                                                            <div className="flex items-start">
                                                                <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                <p className="text-gray-200 text-sm">
                                                                    <span className="font-semibold">Dynamic Value:</span> If the stock price increases to $60, the yield would drop to 3.33% ($2/$60). If the price falls to $40, the yield would rise to 5% ($2/$40).
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 3: Bond Example */}
                                        {currentStep === 3 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-2 text-center text-green-400">Step 3: Bond Yield Example</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="bg-gray-800 p-4 rounded-lg mb-4 w-full">
                                                        <div className="grid grid-cols-2 gap-4">
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-center font-semibold mb-3">Bond Information</div>
                                                                <div className="space-y-3">
                                                                    <div className="flex justify-between">
                                                                        <span>Bond Type:</span>
                                                                        <span className="font-semibold text-blue-400">Corporate Bond</span>
                                                                    </div>
                                                                    <div className="flex justify-between">
                                                                        <span>Face/Par Value:</span>
                                                                        <span className="font-semibold text-blue-400">$1,000</span>
                                                                    </div>
                                                                    <div className="flex justify-between">
                                                                        <span>Coupon Rate:</span>
                                                                        <span className="font-semibold text-green-400">6.00%</span>
                                                                    </div>
                                                                    <div className="flex justify-between">
                                                                        <span>Current Market Price:</span>
                                                                        <span className="font-semibold">$950</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div className="bg-gray-700 p-3 rounded-lg">
                                                                <div className="text-center font-semibold mb-3">Current Yield Calculation</div>
                                                                <div className="space-y-3">
                                                                    <div className="bg-gray-800 p-2 rounded-lg">
                                                                        <div className="font-semibold mb-1">Annual Interest</div>
                                                                        <div className="text-amber-400">
                                                                            $1,000 × 6.00% = $60 per year
                                                                        </div>
                                                                    </div>
                                                                    <div className="bg-gray-800 p-2 rounded-lg">
                                                                        <div className="font-semibold mb-1">Current Yield Formula</div>
                                                                        <div className="text-amber-400">
                                                                            Current Yield = (Annual Interest / Current Price) × 100
                                                                        </div>
                                                                    </div>
                                                                    <div className="bg-gray-800 p-2 rounded-lg">
                                                                        <div className="font-semibold mb-1">Calculation</div>
                                                                        <div className="text-amber-400">
                                                                            Current Yield = ($60 / $950) × 100
                                                                        </div>
                                                                    </div>
                                                                    <div className="bg-gray-800 p-2 rounded-lg">
                                                                        <div className="font-semibold mb-1">Result</div>
                                                                        <div className="text-xl text-center text-green-400 font-bold">
                                                                            6.32%
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="bg-gray-800 p-4 rounded-lg w-full">
                                                        <div className="text-center font-semibold mb-3">Key Insights</div>
                                                        <div className="space-y-3">
                                                            <div className="flex items-start">
                                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                <p className="text-gray-200 text-sm">
                                                                    <span className="font-semibold">Discount Effect:</span> Buying a bond below par value increases the current yield above the coupon rate.
                                                                </p>
                                                            </div>
                                                            <div className="flex items-start">
                                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                <p className="text-gray-200 text-sm">
                                                                    <span className="font-semibold">Market Price Impact:</span> The lower the price you pay for a bond, the higher your current yield will be.
                                                                </p>
                                                            </div>
                                                            <div className="flex items-start">
                                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                <p className="text-gray-200 text-sm">
                                                                    <span className="font-semibold">Coupon vs. Current Yield:</span> The coupon rate (6.00%) is based on the face value, while current yield (6.32%) is based on the market price.
                                                                </p>
                                                            </div>
                                                            <div className="flex items-start">
                                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                <p className="text-gray-200 text-sm">
                                                                    <span className="font-semibold">Note:</span> This simple current yield doesn't account for the capital gain you'll realize if you hold the bond to maturity (buying at $950 and receiving $1,000 at maturity).
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}

                                        {/* Step 4: Yield to Maturity Concept */}
                                        {currentStep === 4 && (
                                            <div className="absolute inset-0 p-4">
                                                <h3 className="text-lg font-semibold mb-2 text-center text-green-400">Step 4: Advanced Yield Calculations</h3>
                                                <div className="flex flex-col items-center h-72 overflow-y-auto">
                                                    <div className="bg-gray-800 p-4 rounded-lg mb-4 w-full">
                                                        <div className="text-center font-semibold mb-3">Yield to Maturity (YTM)</div>
                                                        <div className="bg-gray-700 p-3 rounded-lg">
                                                            <p className="text-gray-200 text-sm mb-3">
                                                                Yield to Maturity is a more comprehensive measure that accounts for all aspects of a bond's return:
                                                            </p>
                                                            <div className="space-y-2">
                                                                <div className="flex items-start">
                                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                    <p className="text-gray-200 text-sm">
                                                                        <span className="font-semibold">Regular interest payments</span>
                                                                    </p>
                                                                </div>
                                                                <div className="flex items-start">
                                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                    <p className="text-gray-200 text-sm">
                                                                        <span className="font-semibold">Capital gain/loss at maturity</span> (difference between purchase price and face value)
                                                                    </p>
                                                                </div>
                                                                <div className="flex items-start">
                                                                    <div className="w-3 h-3 rounded-full bg-amber-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                                    <p className="text-gray-200 text-sm">
                                                                        <span className="font-semibold">Time value of money</span> (considers when payments are received)
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="grid grid-cols-2 gap-4 w-full">
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <div className="text-center font-semibold mb-2 text-red-400">YTM Example</div>
                                                            <div className="bg-gray-700 p-2 rounded-lg mb-2 text-sm">
                                                                <div className="grid grid-cols-2 gap-2">
                                                                    <div>Face Value:</div>
                                                                    <div className="font-semibold">$1,000</div>
                                                                    <div>Coupon Rate:</div>
                                                                    <div className="font-semibold">5%</div>
                                                                    <div>Market Price:</div>
                                                                    <div className="font-semibold">$950</div>
                                                                    <div>Years to Maturity:</div>
                                                                    <div className="font-semibold">5</div>
                                                                </div>
                                                            </div>
                                                            <div className="bg-gray-700 p-2 rounded-lg text-sm">
                                                                <div className="font-semibold text-center mb-1">YTM (approximate)</div>
                                                                <div className="text-center text-red-400 font-bold">5.85%</div>
                                                                <div className="text-xs text-gray-400 text-center mt-1">
                                                                    Higher than the 5% coupon and 5.26% current yield
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div className="bg-gray-800 p-3 rounded-lg">
                                                            <div className="text-center font-semibold mb-2 text-purple-400">Other Yield Metrics</div>
                                                            <div className="space-y-2">
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">Yield to Call (YTC)</span>
                                                                    <div className="text-xs text-gray-300 mt-1">Return if bond is called (redeemed) before maturity</div>
                                                                </div>
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">Yield to Worst (YTW)</span>
                                                                    <div className="text-xs text-gray-300 mt-1">Lower of YTM or YTC - conservative estimate</div>
                                                                </div>
                                                                <div className="bg-gray-700 p-2 rounded text-sm">
                                                                    <span className="font-semibold">SEC Yield</span>
                                                                    <div className="text-xs text-gray-300 mt-1">Standardized yield calculation for bond funds</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="bg-gray-800 p-3 rounded-lg mt-4 w-full">
                                                        <div className="text-center font-semibold mb-2">Calculation Complexity</div>
                                                        <div className="text-sm text-gray-300">
                                                            YTM requires complex mathematics or financial calculators as it involves finding the discount rate that makes the present value of all future cash flows equal to the current price. Most investors use financial calculators, spreadsheets, or online calculators to determine YTM.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    <div className="flex justify-between">
                                        <button 
                                            onClick={prevStep}
                                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                                        >
                                            Previous
                                        </button>
                                        <div className="flex space-x-2">
                                            {[1, 2, 3, 4].map(i => (
                                                <div 
                                                    key={i}
                                                    className={`w-2 h-2 rounded-full ${currentStep === i ? 'bg-green-500' : 'bg-gray-500'} cursor-pointer`}
                                                    onClick={() => setCurrentStep(i)}
                                                ></div>
                                            ))}
                                        </div>
                                        <button 
                                            onClick={nextStep}
                                            className="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors"
                                        >
                                            Next
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* Yield Comparisons */}
                            {activeTab === 'comparisons' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Yield Comparisons</h3>
                                    
                                    <div className="flex mb-4">
                                        <button
                                            className={`px-4 py-2 rounded-tl-lg rounded-bl-lg ${comparisonMode === 'historical' ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                            onClick={() => setComparisonMode('historical')}
                                        >
                                            Historical Trends
                                        </button>
                                        <button
                                            className={`px-4 py-2 rounded-tr-lg rounded-br-lg ${comparisonMode === 'risk' ? 'bg-gray-700 text-white' : 'bg-gray-600 text-gray-300'}`}
                                            onClick={() => setComparisonMode('risk')}
                                        >
                                            Risk vs. Yield
                                        </button>
                                    </div>

                                    <div className="bg-gray-700 p-4 rounded-lg mb-4">
                                        <h4 className="font-semibold text-lg mb-3 text-green-400">
                                            {comparisonMode === 'historical' ? 'Historical Yield Trends (2015-2024)' : 'Risk vs. Yield Relationship'}
                                        </h4>
                                        <div className="h-64 mb-4">
                                            <canvas ref={comparisonsChartRef}></canvas>
                                        </div>
                                        <p className="text-gray-300 text-sm italic text-center">
                                            {comparisonMode === 'historical' 
                                                ? 'Chart shows how yields across different investment types have changed over time. Note the significant drop in Treasury yields during 2020 and subsequent rise in 2022-2024.' 
                                                : 'Chart illustrates the general relationship between risk and yield. Higher yields typically require accepting higher risk of capital loss or volatility.'}
                                        </p>
                                    </div>

                                    <div className="bg-gray-700 p-4 rounded-lg">
                                        <h4 className="font-semibold mb-2 text-blue-400">Key Comparison Insights</h4>
                                        <div className="space-y-3">
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Yield Spread:</span> The difference in yield between different security types (like Treasury vs. corporate bonds) indicates the premium investors demand for taking additional risk.
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Relative Valuation:</span> Comparing yields across asset classes helps identify potential mispricings or attractive opportunities in the market.
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Yield Curve:</span> The structure of yields across different maturities provides insights about economic expectations and potential future interest rate movements.
                                                </p>
                                            </div>
                                            <div className="flex items-start">
                                                <div className="w-3 h-3 rounded-full bg-blue-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                                <p className="text-gray-200 text-sm">
                                                    <span className="font-semibold">Risk Compensation:</span> Higher yields should compensate for specific risk factors such as default risk, interest rate risk, or liquidity constraints.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Investment Considerations */}
                            {activeTab === 'considerations' && (
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold mb-3 text-green-400">Yield Considerations for Investors</h3>
                                    
                                    <div className="bg-gray-700 p-4 rounded-lg space-y-4 mb-4">
                                        <div className="flex items-start">
                                            <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                            <div>
                                                <p className="font-semibold">Yield Isn't Everything</p>
                                                <p className="text-gray-200 text-sm">High yields often come with higher risks. Consider total return (yield + capital appreciation/depreciation) and risk-adjusted performance when evaluating investments.</p>
                                            </div>
                                        </div>
                                        
                                        <div className="flex items-start">
                                            <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                            <div>
                                                <p className="font-semibold">Tax Implications</p>
                                                <p className="text-gray-200 text-sm">Different types of yield income may be taxed differently. Interest income, dividends, and capital gains have varying tax treatments that impact your after-tax yield.</p>
                                            </div>
                                        </div>
                                        
                                        <div className="flex items-start">
                                            <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                            <div>
                                                <p className="font-semibold">Sustainability</p>
                                                <p className="text-gray-200 text-sm">Evaluate whether current yields are sustainable. Unusually high yields may indicate market concerns about dividend/interest cuts or other risks.</p>
                                            </div>
                                        </div>
                                        
                                        <div className="flex items-start">
                                            <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                            <div>
                                                <p className="font-semibold">Interest Rate Sensitivity</p>
                                                <p className="text-gray-200 text-sm">Rising interest rates typically cause bond prices to fall (and yields to rise). Understand how interest rate changes may affect your fixed-income investments.</p>
                                            </div>
                                        </div>
                                        
                                        <div className="flex items-start">
                                            <div className="w-3 h-3 rounded-full bg-green-500 mt-1.5 mr-2 flex-shrink-0"></div>
                                            <div>
                                                <p className="font-semibold">Inflation Impact</p>
                                                <p className="text-gray-200 text-sm">Consider real (inflation-adjusted) yields. A 5% nominal yield during 3% inflation provides only a 2% real yield and may not maintain purchasing power in high-inflation environments.</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-amber-400 mb-2">Yield Traps to Avoid</h4>
                                            <div className="space-y-2">
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Dividend Yield Traps</span>
                                                    <div className="text-xs text-gray-300 mt-1">High yields from falling stock prices rather than strong dividends</div>
                                                </div>
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Distressed Securities</span>
                                                    <div className="text-xs text-gray-300 mt-1">High yields reflecting extreme default risk</div>
                                                </div>
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Return of Capital</span>
                                                    <div className="text-xs text-gray-300 mt-1">Distributions that return your own investment rather than profits</div>
                                                </div>
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Misleading TEY (Tax-Equivalent Yield)</span>
                                                    <div className="text-xs text-gray-300 mt-1">Inflated yields that don't account for different tax circumstances</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-700 p-4 rounded-lg">
                                            <h4 className="font-semibold text-blue-400 mb-2">Strategic Applications</h4>
                                            <div className="space-y-2">
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Income Portfolios</span>
                                                    <div className="text-xs text-gray-300 mt-1">For retirees or those seeking cash flow from investments</div>
                                                </div>
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Yield Spreads Analysis</span>
                                                    <div className="text-xs text-gray-300 mt-1">Identifying market inefficiencies and value opportunities</div>
                                                </div>
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Yield Curve Strategies</span>
                                                    <div className="text-xs text-gray-300 mt-1">Positioning fixed-income investments based on yield curve expectations</div>
                                                </div>
                                                <div className="bg-gray-800 p-2 rounded-lg text-sm">
                                                    <span className="font-semibold">Barbell Approach</span>
                                                    <div className="text-xs text-gray-300 mt-1">Combining high-yield investments with safer assets for balanced returns</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            <div className="mt-6 bg-gray-700 p-4 rounded-lg">
                                <div className="font-semibold mb-2 text-green-400">Related Concepts</div>
                                <div className="grid grid-cols-2 gap-3 text-sm">
                                    <div>
                                        <span className="font-semibold">Yield Curve:</span> 
                                        <p className="text-gray-300">Graph showing yields of bonds with equal credit quality but different maturities</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Yield Spread:</span> 
                                        <p className="text-gray-300">Difference in yield between different securities, often measuring relative risk</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Yield to Call:</span> 
                                        <p className="text-gray-300">Return on a callable bond if it's redeemed before maturity</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Yield to Worst:</span> 
                                        <p className="text-gray-300">Lowest potential return on a bond considering all possible early redemptions</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Real Yield:</span> 
                                        <p className="text-gray-300">Yield adjusted for inflation - what your return is in terms of purchasing power</p>
                                    </div>
                                    <div>
                                        <span className="font-semibold">Yield Enhancement:</span> 
                                        <p className="text-gray-300">Strategies to increase portfolio yield through various methods like covered calls</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<YieldVisual />);
    </script>
    </body>
    </html>